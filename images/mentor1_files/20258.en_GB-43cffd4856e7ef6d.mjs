(self.modernJsonp=self.modernJsonp||[]).push([["20258"],{70957(e,t,r){r.d(t,{A:()=>u});var n=r(418562),i=r(231309),a=r(684059),o=r(107792),s=r(427575),l=r(646844),d=r(869344),c=r(370590),p=r(16172);let u=function(){let e=(0,i.A)();if(e?.isAuthenticated&&!function(){let e=(0,i.A)(),t=window.location.pathname.startsWith("/settings/notifications"),r=window.location.pathname.startsWith("/reports-and-violations/"),n=window.location.pathname.startsWith("/email/subscription")||window.location.pathname.startsWith("/email/remove")||t,a=window.location.pathname.startsWith("/pin/create/"),o="/pin-builder/"===window.location.pathname&&/url=/.test(window.location.href),{userAgent:s}=e||{userAgent:{isMobile:!1,isTablet:!1}};return s.isMobile||s.isTablet?n||r:a||o||n||r}()){var t,r;let i,u,{viewType:h,viewParameter:m}=(0,d.Cs)()??{},f=(0,c.uy)(window);t={data:{appVersion:(0,p.A)(),auxData:{pwa_type:f&&"unknown"!==f?f:void 0,stage:e.stage??"unknown"},browser:e.userAgent.browserType,clientUUID:(0,n.A)(),event_type:7137,time:1e6*Date.now(),unauth_id:e.unauthId,view_type:h,view_parameter:m}},r=e.isAuthenticated,i=a.A.create("ActiveUserResource",t),u=3e4,i.callCreate().catch(e=>{let n,a=e.message;if(a&&"object"==typeof a){"_t_message"in a&&delete a._t_message;try{n=JSON.stringify(a)}catch(e){n="Unable to serialize error message"}}else n=a;(0,l.GV)("webapp.metrics.dau.errors",{sampleRate:1,tags:{message:n,browser:t.data.browser,error_code:(0,s.A)(e,"api_error_code")||"unknown",is_auth:r}}),setTimeout(()=>{u>o.Qv||(u*=2,i.callCreate())},u)})}}},780910(e,t,r){r.d(t,{E2:()=>n,I0:()=>l,KU:()=>u,N9:()=>a,Rv:()=>o,X9:()=>i,Yl:()=>p,hh:()=>d,t8:()=>s});let n=e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t&&[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]},i=(e,t,r)=>.2126*(e/255)**2.2+.7151*(t/255)**2.2+.0721*(r/255)**2.2,a=e=>{let t=e.replace("#","");return(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3<155},o=({hexColor:e,saturationMultiplier:t,brightnessMultiplier:r,minSaturationClamp:i,mixVal:a=1,minBrightnessClamp:o=0})=>{let s=n(e);null===s&&(s=[229,229,224]);let l=((e,t,r)=>{let n=Math.max(e/=255,t/=255,r/=255),i=n-Math.min(e,t,r),a=0;return 0!==i&&(a=(n===e?(t-r)/i+6*(t<r):n===t?(r-e)/i+2:(e-t)/i+4)*60)<0&&(a+=360),{h:a,s:0===n?0:i/n,b:n}})(...s),d=(e,t,r)=>Math.max(t,Math.min(e,r));l.s=d(l.s*(1+t),i,1),l.b=d(l.b*(1+r),o,1);let c=(({h:e,s:t,b:r})=>{let n=r*t,i=n*(1-Math.abs(e/60%2-1)),a=r-n,o=0,s=0,l=0;return e<60?(o=n,s=i):e<120?(o=i,s=n):e<180?(s=n,l=i):e<240?(s=i,l=n):e<300?(o=i,l=n):(o=n,l=i),{r:Math.round((o+a)*255),g:Math.round((s+a)*255),b:Math.round((l+a)*255)}})({...l}),p=e=>({r:Math.round(c.r*a+e*(1-a)),g:Math.round(c.g*a+e*(1-a)),b:Math.round(c.b*a+e*(1-a))}),u=p(0),h=p(255);return[[u.r,u.g,u.b],[h.r,h.g,h.b]]};function s(e){if("string"!=typeof e)return{r:0,g:0,b:0,a:0};let t=e.trim(),r="rgba"===t.slice(0,4).toLowerCase(),n=!r&&"rgb"===t.slice(0,3).toLowerCase();if(!r&&!n)return{r:0,g:0,b:0,a:0};let i=t.indexOf("("),a=t.indexOf(")",i);if(-1===i||-1===a)return{r:0,g:0,b:0,a:0};let o=t.slice(i+1,a).split(",").map(e=>e.trim());if(r&&4!==o.length||n&&3!==o.length)return{r:0,g:0,b:0,a:0};let[s,l,d,c]=o,p=Number(s),u=Number(l),h=Number(d),m=r?Number(c):1;return[p,u,h].some(e=>Number.isNaN(e))||r&&Number.isNaN(m)?{r:0,g:0,b:0,a:0}:{r:p,g:u,b:h,a:m}}function l(e,t){let r=e.a+t.a*(1-e.a);return 0===r?{r:0,g:0,b:0,a:0}:{r:Math.round((e.r*e.a+t.r*t.a*(1-e.a))/r),g:Math.round((e.g*e.a+t.g*t.a*(1-e.a))/r),b:Math.round((e.b*e.a+t.b*t.a*(1-e.a))/r),a:r}}let d=e=>`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`,c=e=>e.toString(16).padStart(2,"0"),p=(e,t)=>{let r=n(e);if(!r)throw Error(`Invalid hex color: ${e} for lightenHexByPercentage`);let[i,a,o]=r,s=Math.max(0,Math.min(100,t))/100,l=Math.round(i+(255-i)*s),d=Math.round(a+(255-a)*s),p=Math.round(o+(255-o)*s);return`#${c(l)}${c(d)}${c(p)}`},u=(e,t)=>d(((e,t)=>{let r=n(e);if(!r)throw Error(`Invalid hex color: ${e} for hexToRgba`);let[i,a,o]=r;return{r:i,g:a,b:o,a:Math.max(0,Math.min(1,t))}})(e,t))},955116(e,t,r){r.d(t,{A:()=>h});var n=r(97407),i=r(296540),a=r(236507),o=r(196866),s=r(28245),l=r(141716);let d="0px 0px 8px rgba(0, 0, 0, 0.1)";var c=r(534955),p=r(815106),u=r(474848);function h({children:e,footerConfig:t,headerConfig:r,height:h,hideOnScroll:m,hideOnScrollState:{isHidden:f,updateHiddenState:x},isFooterHidden:_,noPadding:g,paddingX:b,paddingY:w=3,type:v,zIndex:y,isStoryPin:A}){let S,j;(0,i.useEffect)(()=>{(0,n.A)("FixedContent","/app/packages/layout/FixedContent.tsx")},[]);let{headerLimitedOverflow:P,ignoreObstructions:I,zIndexForGestaltBug:k}=r||{},{appUpsellFooterConfig:E,footerInLego:M,navFooterConfig:C}=t||{},T=!!E,z="header"===v?"top":"bottom",H=(0,s.D2)(),{isRTL:O}=(0,c._8)(),{mWebCloseupRedesignEnabled:R}=(0,o.A)(),D=(0,i.useRef)(null),F=(0,i.useRef)(null);(0,i.useEffect)(()=>{try{if(!I){let e=D.current;F.current=P&&e&&Array.isArray(e.children)?e.children[0]:e,F.current instanceof HTMLElement&&l.A.addObstruction(z,F.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!I&&F.current instanceof HTMLElement&&l.A.removeObstruction(z,F.current)}},[I,P,z,H]);let L="top"===z?"relative":"fixed",N=g?0:w,U=(h??64)+(r?.overrideTop||0),B=m||C?{transition:M||R?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",...f||_?{transform:`translateY(${"top"===z?-U:U}px)`,opacity:M||R?0:1}:Object.freeze({})}:{},W=2*!("relative"!==L||r?.noGutter),V=W?-W:0,Y=H?s.ee:"rgba(255,255,255,.95)";H&&("header"===v?S=-1:j=-1);let $=M?T?void 0:h??64:"100%",J=r?.isTranslucent&&Y||H?Y:"var(--sema-color-background-default)",q=r?.isTransparentBackground&&1?"var(--sema-color-background-transparent)":J,G=(0,i.useMemo)(()=>({height:"footer"===v&&R?`calc(${$} + env(safe-area-inset-bottom))`:$,...R&&"footer"===v?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*(N||0)}px)`}:Object.freeze({})}),[R,$,v,N]),K=(0,p.A)({skipExpActivation:!0});return(0,u.jsx)(a.az,{ref:D,bottom:"footer"===v,dangerouslySetInlineStyle:{__style:{top:S,bottomStyle:j,...!y||k?{zIndex:k||1}:Object.freeze({}),...P?{background:"transparent",overflow:"hidden",paddingBottom:100,marginBottom:-100,pointerEvents:"none"}:Object.freeze({}),...r?.hasBorder?{borderBottom:"1px solid #efefef"}:Object.freeze({}),...t?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...B}},"data-test-id":v,display:T?"flex":void 0,height:h&&!M?h:void 0,left:!0,marginEnd:M?"auto":V,marginStart:M?"auto":V,onTransitionEnd:()=>{(m||C)&&F.current&&(f||_?l.A.removeObstruction(z,F.current):l.A.addObstruction(z,F.current))},position:L,right:!0,top:"header"===v,width:M||"fixed"!==L?void 0:"100%",zIndex:k?void 0:y,children:(0,u.jsx)(a.az,{alignItems:t?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:q,paddingLeft:O||!K||A?void 0:"8px",paddingRight:O&&K&&!A?"8px":void 0,...G,boxShadow:R&&"footer"===v?`0 10px 0 0 ${q}, ${d}`:M?d:void 0,marginBottom:M&&!C?.docked?16:void 0,...P?{pointerEvents:"auto"}:Object.freeze({}),...r?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:M||t?.alignCenter?"flex":void 0,marginEnd:M?"auto":void 0,marginStart:M?"auto":void 0,paddingX:b||4*("footer"===v&&!g)+W,paddingY:N,position:"relative",rounding:M&&!C?.docked?"pill":void 0,width:C?C.footerWidth:T?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:x}):e})})}},909616(e,t,r){r.r(t),r.d(t,{default:()=>d});var n=r(97407),i=r(296540),a=r(236507),o=r(955116),s=r(229813),l=r(474848);function d({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:r,isTranslucent:d,isTransparentBackground:c,noGutter:p,overrideTop:u,useRoundedCorners:h,zIndexForGestaltBug:m,isStoryPin:f,...x}){(0,i.useEffect)(()=>{(0,n.A)("FixedHeader","/app/packages/layout/FixedHeader.tsx")},[]);let{noPadding:_,paddingY:g=3,zIndex:b}=x;return(0,l.jsx)(a.ib,{height:t?44+2*(_?0:g)*4:void 0,top:u||0,zIndex:b||void 0,children:(0,l.jsx)(s.A,{hideOnScroll:x.hideOnScroll,children:n=>(0,l.jsx)(o.A,{...x,headerConfig:{isTranslucent:d,isTransparentBackground:c,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:r,noGutter:p,overrideTop:u,zIndexForGestaltBug:m,useRoundedCorners:h},hideOnScrollState:n,isStoryPin:f,type:"header"})})})}},229813(e,t,r){r.d(t,{A:()=>o});var n=r(296540),i=r(991402);function a(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends n.Component{constructor(...e){super(...e),a(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),a(this,"lastScrollPos",0),a(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),a(this,"handleScroll",(0,i.A)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:t}=this.props,{isHidden:r}=this.state,n=window.scrollY,i=n-this.lastScrollPos,a="none",{scrollHeight:o,clientHeight:s}=document.documentElement||{};Number.isNaN(o)||Number.isNaN(s)||(a=i<0?n<=Math.abs((window.scrollMinY||0)+Math.max(i,20))?"start":"none":n>=(window.scrollMaxY||o-s)-Math.max(i,20)?"end":"none");let l=55*!t?.isModal;e?i>20&&r&&n>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),t?.onScroll(!1)):(i<-20&&!r||n<=l)&&(this.updateHiddenState(!0),t?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===a&&!r||n<=l?(this.updateHiddenState(!0),t?.onScroll(!0)):(n>l||"end"===a)&&r&&(this.updateHiddenState(!1),t?.onScroll(!1)):(i<-20||"start"===a)&&r||n<=l?(this.updateHiddenState(!1),t?.onScroll(!1)):(i>20||"end"===a)&&!r&&(this.updateHiddenState(!0),t?.onScroll(!0)),this.lastScrollPos=n},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:t}=this.props,{isHidden:r}=this.state;return e({isHidden:!t?.forceShow&&r,updateHiddenState:this.updateHiddenState})}}},435845(e,t,r){r.d(t,{A:()=>n});function n(e,t){return t in e}},878528(e,t,r){r.d(t,{A:()=>d});var n=r(296540),i=r(671468),a=r(97132),o=r(492472),s=r(226157);let l=(e,t,r)=>e.resources[t]?.[r];function d(e){let{name:t,optionsKey:r}=e??{name:"",optionsKey:""},d=t===o.W,c=(0,s.uN)(),p=c?.get(t,r);if(p)throw p;let u=(0,a.createSelector)(e=>l(e,t,r),e=>e?.data),h=(0,a.createSelector)(e=>l(e,t,r),e=>e?.auxData),m=(0,a.createSelector)(e=>l(e,t,r),e=>e?.error),f=(0,a.createSelector)(e=>l(e,t,r),e=>e?.nextBookmark),x=(0,i.d4)(f),_=(0,i.d4)(u),g=(0,i.d4)(h),b=(0,i.d4)(m),w=(0,n.useRef)({auxData:void 0,data:void 0,error:void 0,isAtEnd:!1,nextBookmark:void 0});if(d)return w.current;let v={auxData:g,data:_,error:b,isAtEnd:"-end-"===x,nextBookmark:x};return(v.auxData!==w.current.auxData||v.data!==w.current.data||v.error!==w.current.error||v.isAtEnd!==w.current.isAtEnd||v.nextBookmark!==w.current.nextBookmark)&&(w.current=v),w.current}},534907(e,t,r){r.d(t,{A:()=>a});var n=r(427575),i=r(182835);function a(){let e=navigator.serviceWorker;return e&&e.getRegistration?((0,i.PM)("mweb_service_worker.unregister_attempt"),e.getRegistration().then(e=>{if(e)return e.unregister().then(()=>((0,i.PM)("mweb_service_worker.unregister_success"),navigator.serviceWorker&&window.caches?window.caches.keys().then(e=>{let t=e.find(e=>e.startsWith("workbox-precaching"));return t?window.caches.delete(t):null}).then(()=>(0,i.PM)("mweb_service_worker.clear_app_shell")):Promise.resolve())).catch(e=>{(0,i.fu)("mweb_service_worker.unregister_fail",{error:(0,n.A)(e,"message")})})})):Promise.resolve()}},484297(e,t,r){r.d(t,{A:()=>n});function n({top:e,right:t,bottom:r,left:n,windowHeight:i,windowWidth:a,threshold:o=0}){return e>=0+o&&n>=0+o&&r<=i-o&&t<=a-o}},582301(e,t,r){r.d(t,{P:()=>n,y:()=>i});let{Provider:n,getMaybe:i}=(0,r(697384).A)("PinCreateDeleteContext")},866719(e,t,r){r.d(t,{A:()=>eV});var n=r(97407),i=r(296540),a=r(671468),o=r(278106),s=r(236507),l=r(960926),d=r(70957),c=r(528074),p=r(696561),u=r(935399),h=r(632321),m=r(930304),f=r(320923),x=r(856978),_=r(591999),g=r(28245);let b={borderRadius:"32px 32px 0px 0px",bottom:0,left:0,overflow:"hidden",touchAction:"none",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",zIndex:1,width:"100vw",maxHeight:"100vw",minHeight:"30vh"},w={full:"100vh",default:"50vh",auto:""},v=({size:e,isDarkMode:t})=>(b.height=w[e],b.maxHeight="auto"===e?"90vh":"100vw",b.backgroundColor=t?g.be:"#FFFFFF",b);var y=r(273869),A=r(643357),S=r(443715),j=r(76166),P=r(474848);let I=({content:e,footer:t,header:r})=>{let[n,a]=(0,i.useState)(!1),o=(0,i.useRef)(null),l=(0,i.useCallback)(()=>{let e=o.current;e&&a(e?.clientHeight<e?.scrollHeight&&e.offsetHeight+e.scrollTop<e.scrollHeight)},[]);return(0,i.useEffect)(()=>{l()},[l]),(0,i.useEffect)(()=>(window?.addEventListener("resize",l),()=>{window?.removeEventListener("resize",l)}),[l]),(0,P.jsxs)(i.Fragment,{children:[(0,P.jsxs)(s.az,{ref:o,fit:!0,onScroll:l,overflow:"scroll",padding:0,children:[r,(0,P.jsx)(s.az,{flex:"grow",overflow:"auto",children:e})]}),!!t&&(0,P.jsx)(s.az,{dangerouslySetInlineStyle:n?{__style:{boxShadow:"var(--sema-space-0) var(--sema-space-negative-50) var(--sema-space-200) var(--sema-space-0) rgb(0 0 0 / 0.12)"}}:void 0,fit:!0,position:"relative",children:t})]})};function k({accessibilityModalLabel:e,allowClickAndDrag:t,allowBackgroundScroll:r=!1,children:a,closeOnOutsideClick:o=!0,footer:l,header:d,isOpen:c,mobileIsSlideUp:p,onDismiss:u,zIndex:h,size:m="auto"}){(0,i.useEffect)(()=>{(0,n.A)("SheetMobileWithMediaHeader","/app/packages/experiences/gestalt/SheetMobile/SheetMobileWithMediaHeader.tsx")},[]);let f=(0,A.A)(),x=(0,i.useRef)(null),{setAppFocusState:b}=(0,j.Y)(),[k,E]=(0,i.useState)(!1),M=(0,g.D2)();if((0,i.useEffect)(()=>(c?b(!1):b(!0),()=>{c&&b(!0)}),[b,c]),(0,i.useEffect)(()=>(x.current=(0,_.A)(()=>{x.current&&E(!0)}),()=>{"u">typeof window&&Object.prototype.hasOwnProperty.call(window,"cancelAnimationFrame")&&x.current&&(window.cancelAnimationFrame(x.current),x.current=null)}),[]),(0,i.useEffect)(()=>{let e=c&&!r;return e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="hidden",e.touchAction="none"}})(),()=>{e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="visible",e.touchAction="auto"}})()}},[c,r]),!c)return null;let C=(({isDarkMode:e,size:t})=>{let r=e?g.be:"#FFFFFF";return{__style:{...v({size:t,isDarkMode:e}),backgroundColor:r,transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out"}}})({isDarkMode:M,size:m});C.__style.transform=(()=>{if(p||!(()=>{if("u"<typeof window)return!1;let e=Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth),t=Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight);return e<=380||t<=760})())return"";let e=Math.min(1,(Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth)-12)/380,(Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight)-12)/600);return e=Math.max(.8,e),` scale(${e})`})();let T=(({size:e,isShowing:t,isDarkMode:r})=>{let n=v({size:e,isDarkMode:r});return n.transition="all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",n.transform=t?"translateY(0)":`translateY(${w[e]||"100vh"})`,{__style:n}})({size:m,isShowing:k,isDarkMode:M});return(0,P.jsx)(S.A,{allowClickAndDrag:t,children:(0,P.jsx)(s.Wd,{children:(0,P.jsxs)(s.az,{"aria-label":e,display:"inlineBlock",height:"100%",position:"relative",role:"dialog",zIndex:h||y.QN,children:[(0,P.jsx)(s.Rp,{accessibilityLabel:f.bt("Mobile sheet mask", "Mobile Sheet Mask", "mweb.sheet_mobile.mask", undefined, true),onTap:()=>{o&&u()},tapStyle:"none",children:(0,P.jsx)(s.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out"}},height:"100%",left:!0,position:"fixed",top:!0,width:"100%",zIndex:new s.rk(1)})}),(0,P.jsx)(s.az,{color:"default",dangerouslySetInlineStyle:p?T:C,position:"fixed",children:(0,P.jsx)(s.az,{direction:"column",display:"flex",justifyContent:"between",maxHeight:T.__style?.maxHeight||"100vh",position:"relative",width:"100%",children:(0,P.jsx)(I,{content:a,footer:l,header:d})})})]})})})}var E=r(646844);let M=({display_data:e,complete:t,dismiss:r,context_aux_data:n})=>{let a=(0,A.A)(),{logContextEvent:o}=(0,h.o)(),[l,d]=(0,i.useState)(!0),[c,p]=(0,i.useState)(0),u=()=>{d(!1),r()},_=(0,i.useCallback)((e,t)=>{o({event_type:e,component:15489,element:t,aux_data:{experience_id:n.experience_id,placement_id:n.placement_id,step_number:c+1,step_index:c}})},[n.experience_id,n.placement_id,c,o]);if((0,i.useEffect)(()=>{_(13,18257)},[c,_]),!l)return null;if(!(e.steps&&e.steps.length>0&&e.steps.every(e=>e.title&&e.subtitle&&e.primary_button&&e.image)))return(0,E.GV)(m.pv,{sampleRate:1,tags:{experience_id:n.experience_id,placement_id:n.placement_id,reason:"Required display data not present",platform:4}}),null;let g=e.steps[c];if(!g)return(0,E.GV)(m.pv,{sampleRate:1,tags:{experience_id:n.experience_id,placement_id:n.placement_id,reason:`No step for index ${c}`,platform:4}}),null;let b=window?.innerWidth||375,w=(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(s.ib,{top:0,children:(0,P.jsx)(s.az,{padding:3,position:"absolute",width:"100%",children:(0,P.jsx)(s.K0,{accessibilityLabel:a.bt("Dismiss", "Dismiss", "experiences.ExperienceModalWindow.modalDismissIconButton", undefined, true),bgColor:"washLight",icon:"close",iconColor:"default",onClick:()=>{_(123,75),u()},size:"lg"})})}),(0,P.jsx)(s.iX,{contentAspectRatio:.8,height:1.25*b,width:b,children:(0,P.jsx)(s._V,{alt:g.image.image_alt,color:g.image.dominant_color||void 0,fit:"cover",naturalHeight:g.image.height,naturalWidth:g.image.width,src:g.image.url})})]}),v=(0,P.jsxs)(s.az,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",paddingX:2,paddingY:3,children:[g.secondary_button&&(0,P.jsx)(f.A,{buttonType:"secondary",data:(0,x.q)(g.secondary_button,()=>{_(102,13005),u()}),experienceSchema:2}),(0,P.jsx)(f.A,{buttonType:"primary",data:(0,x.q)(g.primary_button,()=>{c<e.steps.length-1?(_(102,13004),p(c+1)):t()}),experienceSchema:2})]});return(0,P.jsx)(k,{accessibilityModalLabel:a.bt("Multi-step modal", "Multi Step Modal", "experiences.ExperienceMultiStepModal.accessibilityModalLabel", undefined, true),allowClickAndDrag:!1,footer:v,header:w,isOpen:l,mobileIsSlideUp:!0,onDismiss:()=>{_(123,16412),u()},size:"auto",children:(0,P.jsxs)(s.az,{padding:3,children:[(0,P.jsx)(s.az,{marginBottom:3,children:(0,P.jsx)(s._Y,{size:"500",children:g.title})}),(0,P.jsx)(s.KJ,{children:g.subtitle})]})})};function C({experience:e}){return(0,i.useEffect)(()=>{(0,n.A)("ExperienceMultiStepModal","/app/packages/experiences/Experiences/ExperienceMultiStepModal/ExperienceMultiStepModal.tsx")},[]),(0,P.jsx)(p.Je,{eligibleSchemas:[2],eligibleTypes:[26],experience:e,children:({complete:t,dismiss:r,experience:{display_data:n}})=>(0,P.jsx)(M,{complete:t,context_aux_data:{experience_id:e?.experience_id,placement_id:e?.placement_id},dismiss:r,display_data:n})})}var T=r(209364),z=r(452799),H=r(55268),O=r(449798),R=r(909616),D=r(605257),F=r(604402),L=r(622165),N=r(534955),U=r(468133),B=r(87431),W=r(171650),V=r(441472),Y=r(107967),$=r(211974),J=r(221077),q=r(568677),G=r(654803),K=r(407242),X=r(722847),Q=r(431216),Z=r(919520);r(6508);var ee=r(230973),et=r(275552),er=r(991402),en=r(871211),ei=r(484297),ea=r(934949);let eo={__style:{textOverflow:"ellipsis",whiteSpace:"nowrap"}};function es({currentTabIndex:e,tabBoards:t}){(0,i.useEffect)(()=>{(0,n.A)("MoreIdeasTabs","/app/www/Homefeed/MoreIdeasTabs.tsx")},[]);let r=(0,i.useRef)(null),l=(0,i.useRef)(!1),{width:d,height:c}=(0,ee.A)()||{width:0,height:0},p=(0,i.useRef)([]),u=(0,o.Zp)(),h=(0,A.A)(),m=(0,et.A)(),f=(0,a.wA)(),x=t.length?[{href:"/",text:(0,P.jsx)(s.az,{children:h.bt("All", "All", "homefeed.moreIdeasTab.homefeedTab", undefined, true)}),tabType:1},...t.filter(e=>e).map(({id:e,name:t},r)=>({href:`/?boardId=${String(e)}`,text:(0,P.jsx)(s.az,{dangerouslySetInlineStyle:eo,maxWidth:100,overflow:"hidden",children:t}),boardId:e,tabType:2,ref:p.current[r]}))]:null,_=e=>1===e?11081:11082,g=(0,i.useRef)([]),b=(0,i.useCallback)(()=>{p&&p.current&&p.current.length&&p.current.forEach((e,r)=>{if(!e?.current)return;let{id:n,name:i}=t[r]||{},a=e.current.getBoundingClientRect();(0,ei.A)({left:a.left,right:a.right,top:a.top,bottom:a.bottom,windowHeight:c,windowWidth:d})&&n&&!g.current.includes(n)&&(m({event_type:13,view_type:1,view_parameter:92,component:13184,element:_(2),object_id_str:n,aux_data:{board_id:n,tab_title:i,referrer:19}}),g.current.push(n))})},[p,m,t,c,d]),w=(0,er.A)(()=>{b()},50);if((0,en.A)(()=>{p.current=Array(t.length).fill(void 0).map((e,t)=>p.current[t]||(0,i.createRef)())}),(0,i.useEffect)(()=>{b();let e=r.current;return e&&e.addEventListener("scroll",w),()=>{e?.removeEventListener("scroll",w)}},[b,w]),(0,i.useEffect)(()=>()=>{l.current&&(window.cancelAnimationFrame(l.current),l.current=null)}),!x)return null;let v=x.map(e=>({href:e.href,text:e.text,ref:e.ref}));return(0,P.jsx)(s.az,{ref:r,"data-test-id":"more-ideas-tabs",fit:!0,marginBottom:1,marginTop:1,overflow:"scrollX",children:(0,P.jsx)(s.tU,{activeTabIndex:e,onChange:({activeTabIndex:e})=>{let t=x?.[e];if(t){let r;r=t.boardId,f((0,ea.Y)(r,e)),m({event_type:101,view_type:1,view_parameter:92,component:13184,element:_(t.tabType),aux_data:{index:e.toString(),board_id:t.boardId,referrer:19},object_id_str:t.boardId})}let{pathname:r,state:n}=x?{pathname:(x[e]||x[0]).href,state:(x[e]||x[0]).locationState||void 0}:{};u(r,{state:n})},tabs:v})})}var el=r(408270),ed=r(433371),ec=r(193461),ep=r(956220),eu=r(457494);function eh(){(0,i.useEffect)(()=>{(0,n.A)("PreferencesUpdatedBanner","/app/www/pages/duplo/PreferencesUpdatedBanner.tsx")},[]);let{shouldRefreshHomefeed:e,clearRefreshFlag:t}=(0,ep.d)(),{showToast:r}=(0,$.CG)(),a=(0,A.A)(),o=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{if(e&&!o.current){o.current=!0;let e=a.bt("Preferences updated! We're refreshing your feed now.", "Preferences updated! We're refreshing your feed now.", "PreferencesUpdatedBanner.message", undefined, true);r(({hideToast:r})=>(0,P.jsx)(H.A,{duration:3e3,onHide:()=>{r(),t(),o.current=!1},text:e}))}else e||(o.current=!1)},[e,t,r,a]),null}var em=r(925177),ef=r(429759),ex=r(947814);function e_(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let eg=(0,ex.A)(()=>r.e("82269").then(r.bind(r,830953)),void 0,e=>830953,"app-www-pages-duplo-CoreActionsHeader",e=>["82269"]),eb=(0,ex.A)(()=>r.e("65469").then(r.bind(r,777374)),void 0,e=>777374,"app-www-stories-FullWidthPinStory",e=>["65469"]),ew=(0,ex.A)(()=>r.e("55177").then(r.bind(r,751536)),{ssr:!1},e=>751536,void 0,void 0),ev=(0,ex.A)(()=>r.e("30764").then(r.bind(r,518008)),void 0,e=>518008,"app-www-Homefeed-HomefeedMoreIdeasTabContent",e=>["30764"]),ey=(0,ex.A)(()=>r.e("45231").then(r.bind(r,181915)),void 0,e=>181915,"app-www-stories-LandingPageStory-LandingPageStory",e=>["45231"]),eA=(0,ex.A)(()=>Promise.all([r.e("25495"),r.e("77218"),r.e("70919")]).then(r.bind(r,61625)),{ssr:!1},e=>61625,void 0,void 0),eS=(0,ex.A)(()=>Promise.all([r.e("84069"),r.e("25669")]).then(r.bind(r,865156)),{ssr:!1},e=>865156,void 0,void 0),ej=(0,ex.A)(()=>r.e("41228").then(r.bind(r,506791)),{ssr:!1},e=>506791,void 0,void 0),eP=(0,ex.A)(()=>Promise.all([r.e("91796"),r.e("48693")]).then(r.bind(r,899380)),{ssr:!1},e=>899380,void 0,void 0),eI=(0,i.lazy)(()=>r.e("35417").then(r.bind(r,966272))),ek=(0,i.lazy)(()=>r.e("97322").then(r.bind(r,612561))),eE=(0,i.lazy)(()=>r.e("30942").then(r.bind(r,476717))),eM=(0,i.lazy)(()=>r.e("15634").then(r.bind(r,520233))),eC=(0,i.lazy)(()=>r.e("23654").then(r.bind(r,14661))),eT=(0,i.lazy)(()=>r.e("3106").then(r.bind(r,7737))),ez={feedKey:eu.bg,trafficSource:eu.mA,resourceName:eu.jC,feedItemProps:e=>({viewParameter:92,viewType:1,onFeedItemClick:()=>{e.onFeedItemClick&&e.onFeedItemClick()}}),pullToRefresh:!0},eH={first_page_size:"25",page_size:"10"},eO=({webMobileHomeFeedTakoverExperience:e})=>{let{feedKey:t,feedItemProps:r,pullToRefresh:n}=ez,i=(0,o.zy)(),d=(0,o.Zp)(),c=(0,a.d4)(({session:e})=>e.firstHomeFeedRequestAfterNux),p={webMobileHomeFeedTakoverExperience:e,location:i,navigate:d},u=(0,a.d4)(({feeds:e})=>e[t]??[]),{selectedUseCases:h,selectedPins:m}=(0,ec.p)(),f=(0,el.xx)(h,m),x=!c,_=f.length>0?{in_nux:c,nux_signals_map:f}:{in_nux:c},g={...eu.Vf,...x?{...eH}:{..._},in_local_navigation:!0,static_feed:!!(i&&(i.pathname.includes("pwt_performance_testing")||void 0!==(0,J.A)(i.search).pwt_performance_testing))},b=(0,U.A)({name:eu.jC,options:g}),{isAtEnd:w,isFetching:v,fetchMore:y,data:A,refresh:S}=b,j={includeBackgroundImages:!0,includeVideos:!0,pins:Object.values((0,em.zy)())};c&&(0,E.GV)("home_product.homefeed.has_in_nux_flag",{sampleRate:.1,tags:{appType:"mweb"}});let I=(()=>{let{isGraphQLEnabledInGeneral:e}=(0,K.aR)(),{locale:t}=(0,N._8)(),r=(0,em.zy)();return({feedItems:n,prevFeedItems:i,finishedRefresh:a,unauthLandingPinStateForAuthHomefeed:{pinId:o,feedItem:s}})=>{if(!n.length)return null;if(a&&i.length>0){let e=(e,t)=>e.slice(0,t).map(e=>e.id),r=e(i,5),a=e(n,5),o={appType:"mweb",language:t&&t.slice(0,2)||"unknown",locale:t||"unknown"};(0,E.GV)("home_product.homefeed.refresh",{sampleRate:1,tags:o}),JSON.stringify(r)===JSON.stringify(a)&&(0,E.GV)("home_product.homefeed.refresh.no_change",{sampleRate:1,tags:o})}if(o&&!e){if(i.length>0&&i[0]!==n[0])return(0,V.y1)().removeItem(l.sH),{feedItem:null,pinId:null};else if((0===i.length||i[0]===n[0]&&i.length!==n.length||!s)&&r[o]&&!n.slice(0,5).some(({id:e})=>e===o))return{feedItem:{id:o,type:"pin",trackingParams:n[0].trackingParams},pinId:o}}return null}})(),k=A?.length?A[0]:null;if(e&&e.display_data?.in_checklist_education&&e.display_data?.num_columns_requested===2){let e={type:"fullWidthBreakIn",value:{index:0,content:k?.id&&(0,P.jsx)(ef.A,{storyId:k.id,children:e=>(0,P.jsx)(eb,{slotIndex:0,story:e,viewParameter:3833,viewType:604})})}},i=u.slice(1);return(0,P.jsx)(s.az,{"data-test-id":"homefeed",children:(0,P.jsx)(X.RM,{authHomefeedComponentDidUpdate:I,feedItemProps:r&&r(p),feedItems:i,feedItemsAdjustment:e,feedKey:t,pagination:{hasNext:!w,isLoadingNext:v,loadNext:()=>y(),refetch:()=>S()},pullToRefresh:n,trafficSource:eu.mA,visuallyCompleteProfilerOptions:j})})}return x&&!e?.display_data?(0,P.jsx)(s.az,{"data-test-id":"homefeed-ssr",children:(0,P.jsx)(X.Ir,{authHomefeedComponentDidUpdate:I,feedItemProps:r&&r(p),feedKey:eu.bg,pullToRefresh:n,resource:b,serverRender:!0,trafficSource:eu.mA,visuallyCompleteProfilerOptions:j})}):(0,P.jsx)(s.az,{"data-test-id":"homefeed",children:(0,P.jsx)(X.Ir,{authHomefeedComponentDidUpdate:I,feedItemProps:r&&r(p),feedKey:t,pullToRefresh:n,resource:b,trafficSource:eu.mA,visuallyCompleteProfilerOptions:j})})},eR=(0,ex.A)(()=>r.e("23840").then(r.bind(r,46083)),{ssr:!1},e=>46083,void 0,void 0),eD=(0,ex.A)(()=>r.e("30502").then(r.bind(r,405285)),{ssr:!1},e=>405285,void 0,void 0),eF=(0,ex.A)(()=>r.e("34312").then(r.bind(r,64763)),{ssr:!1},e=>64763,void 0,void 0),eL=(0,ex.A)(()=>r.e("48117").then(r.bind(r,488084)),{ssr:!1},e=>488084,void 0,void 0),eN=(0,ex.A)(()=>r.e("99679").then(r.bind(r,594594)),{ssr:!1},e=>594594,void 0,void 0),eU=(0,ex.A)(()=>r.e("67924").then(r.bind(r,234143)),{ssr:!1},e=>234143,void 0,void 0);class eB extends i.PureComponent{constructor(...e){super(...e),e_(this,"state",{...(0,el.of)(),currentTabIndex:"number"==typeof this.props.selectedTabIndex?this.props.selectedTabIndex:0,showUnlinkTokenExpiredModal:!1,showDeleteAccountSurveyModal:!1,showYipModal:!1,shouldDismissCoreActionsHeader:!1,showQRAppErrorBanner:!1}),e_(this,"renderOptInInterestPicker",()=>{let{everythingFeedExperience:e,isLimitedLogin:t}=this.props,{extraPlpImages:r,extraBlpImages:n}=this.state,i=!t&&e&&504192===e.experience_id,a=i&&e&&e.display_data&&e.display_data.full_screen_modal;return e&&i?(0,P.jsx)(c.A,{name:"SafeSuspense_HomePage_OptInInterestPicker",children:a?(0,P.jsx)(eU,{experience:e,extraImageInfo:r.length>0?r:n,viewParameter:92,viewType:1}):(0,P.jsx)(eL,{experience:e,viewParameter:92,viewType:1})}):null})}static getDerivedStateFromProps(e){let{selectedTabIndex:t,navigate:r,location:n}=e;return(0,J.A)(n.search).show_qr_app_error?(r("/",{replace:!0}),{showQRAppErrorBanner:!0}):"number"==typeof t?{currentTabIndex:t}:null}componentDidMount(){let{dispatchViewedSharedPins:e,location:t,i18n:r,showToast:n,navigate:i}=this.props,{sharedPinData:a}=this.state;(0,ed.h)(!1),(0,d.A)(),a&&Object.keys(a).length>0&&e(a),t.state?.unlinkTokenInvalid&&this.setState({showUnlinkTokenExpiredModal:!0}),t.state?.isCloseAccountReasonOpen&&this.setState({showDeleteAccountSurveyModal:!0}),t.state?.showError&&n(({hideToast:e})=>(0,P.jsx)(H.A,{duration:5e3,onHide:e,text:r.bt("We can’t find that idea. Try searching for one just like it.", "We can’t find that idea! Try searching for one just like it.", " - ", undefined, true),type:"error"})),(0,J.A)(t.search).show_yip_modal&&(i("/",{replace:!0}),this.setState({showYipModal:!0})),this.props.shouldRefreshHomefeed&&(0,Q.Y9)("homefeed")}render(){let{checkExperiment:e,currentUserId:t,currentUsername:r,everythingFeedExperience:n,navigate:a,i18n:o,isAuthenticated:l,isEligibleForCoreActionsHeader:d,isPartner:h,location:m,moreIdeasStory:f,newUserWelcomeStoryExperience:x,webMobileHomeFeedTakoverExperience:_,selectedTabBoardId:g,tabBoards:b,shouldRefreshHomefeed:w}=this.props,{currentTabIndex:v,showUnlinkTokenExpiredModal:y,showDeleteAccountSurveyModal:A,showYipModal:S,shouldDismissCoreActionsHeader:j,showQRAppErrorBanner:I}=this.state,k=(0,J.A)(m.search),E=k&&k.boardId||g;if(n&&!I)switch(n.experience_id){case 40002:case 10105:return(0,P.jsx)(c.A,{name:"SafeSuspense_HomePage_Nux",children:(0,P.jsx)(B.A,{fallback:(0,P.jsx)(W.A,{accessibilityLabel:this.props.i18n.bt("Loading new user education", "Loading new user education", "Loading spinner", undefined, true)}),children:h?(0,P.jsx)(eF,{experience:n}):(0,P.jsx)(eD,{experience:n})})});case 500681:return(0,P.jsx)(c.A,{name:"SafeSuspense_HomePage_ContactUpdate",children:(0,P.jsx)(eR,{fallback:(0,P.jsx)(W.A,{accessibilityLabel:this.props.i18n.bt("Loading experience", "Loading experience", "loading experience spinner", undefined, true)})})})}let M=l&&e("mweb_hf_core_actions_header").anyEnabled&&d,H=()=>{this.setState({shouldDismissCoreActionsHeader:!0})};return(0,P.jsx)(G.A,{viewParameter:92,viewType:1,children:(0,P.jsx)(Y.A,{view:1,viewParameter:92,children:(0,P.jsxs)(D.default,{dataLayoutShiftBoundaryId:"AuthHomePageContainer",hasFixedHeader:!0,children:[I&&(0,P.jsx)(s.az,{marginTop:4,children:(0,P.jsx)(eT,{})}),(0,P.jsx)(Z.A,{text:o.bt("Home", "Home", "HomePage.HiddenAccessibilityHeader", undefined, true)}),!!b?.length&&(0,P.jsx)(R.default,{hideOnScroll:l,noPadding:!0,overrideTop:0,children:(0,P.jsx)(s.az,{paddingY:1,children:(0,P.jsx)(es,{currentTabIndex:v,tabBoards:b||[]})})}),f&&(0,P.jsx)(s.az,{marginEnd:-4,marginStart:-4,paddingY:2,children:(0,P.jsx)(ef.A,{storyId:f.id||"",children:e=>(0,P.jsx)(eb,{slotIndex:0,story:e,viewParameter:92,viewType:1},f.id)})}),0!==v&&E&&v<=(b?.length??0)&&(0,P.jsx)(ev,{boardId:E})||(0,P.jsxs)(i.Fragment,{children:[(0,P.jsx)(C,{experience:n}),(0,P.jsx)(p.Vj,{experience:n,placementId:40001}),(0,P.jsx)(p.nU,{placementId:40001}),(0,P.jsx)(p.aR,{experience:n,placementId:40001}),(0,P.jsx)(u.A,{placementId:n?.placement_id}),(0,P.jsx)(z.A,{placementId:1000544}),(0,P.jsx)(T.A,{placementId:1000558}),(0,P.jsx)(p.Je,{eligibleIds:[500726,500866,500735,500833,501182,501275,501385,501358,501908,501909,503291],experience:n,children:(0,P.jsx)(B.A,{children:(0,P.jsx)(ek,{experience:n})})}),n&&(0,P.jsx)(p.Je,{eligibleIds:[507483],experience:n,children:({dismiss:e,experience:{display_data:t}})=>{let r=!("is_blocking"in t)||t.is_blocking;return(0,P.jsx)(eA,{container:"HomePage",dismiss:e,isBlockingModal:r})}}),n&&(0,P.jsx)(p.Je,{eligibleIds:[507661],experience:n,children:({dismiss:e,experience:{display_data:t}})=>(0,P.jsx)(eS,{container:"HomePage",displayData:t,onDismiss:e})}),n&&(0,P.jsx)(p.Je,{eligibleIds:[507924],experience:n,children:({complete:e,dismiss:t})=>(0,P.jsx)(ej,{onComplete:e,onDismiss:t})}),n&&(0,P.jsx)(p.Je,{eligibleIds:[508387],experience:n,placementId:40001,children:({complete:e,dismiss:t,experience:r})=>(0,P.jsx)(eP,{complete:e,dismiss:t,experience:r})}),n&&(0,P.jsx)(p.Je,{eligibleIds:[505326],experience:n,children:({complete:e,dismiss:t})=>(0,P.jsx)(i.Suspense,{children:(0,P.jsx)(eC,{complete:e,dismiss:t})})}),n&&(0,P.jsx)(p.Je,{eligibleIds:[505801],experience:n,children:({complete:e})=>(0,P.jsx)(i.Suspense,{children:(0,P.jsx)(eM,{complete:e})})}),x?.display_data?.story&&x.display_data.showUpdatedLandingPageStory&&(0,P.jsx)(ey,{isMoreIdeasTabsVisible:!!b?.length,newUserWelcomeStoryExperience:x}),(0,P.jsxs)(s.az,{marginTop:2*(!b?.length&&!f),children:[!j&&M&&(0,P.jsx)(eg,{onDismiss:H,username:r||""}),(0,P.jsx)(eO,{webMobileHomeFeedTakoverExperience:_})]})]}),y&&(0,P.jsx)(B.A,{children:(0,P.jsx)(s.az,{"data-test-id":"unlink-expired-token",children:(0,P.jsx)(eE,{onDismiss:()=>{a("/",{replace:!0}),this.setState({showUnlinkTokenExpiredModal:!1})}})})}),A&&(0,P.jsx)(B.A,{children:(0,P.jsx)(eI,{isPartner:h,onDismiss:()=>{a("/",{replace:!0}),this.setState({showDeleteAccountSurveyModal:!1})},userId:t,username:r})}),S&&(0,P.jsx)(c.A,{name:"YearInPreviewConfirmPublishModal",children:(0,P.jsx)(eN,{onModalDismiss:()=>{this.setState({showYipModal:!1})}})}),this.renderOptInInterestPicker(),0===v&&n&&(0,P.jsx)(p.Je,{eligibleIds:[508418],experience:n,children:()=>w?(0,P.jsx)(eh,{}):(0,P.jsx)(ew,{hasTabBoards:(b?.length??0)>0})})]})})})}}let eW=[];function eV(){(0,i.useEffect)(()=>{(0,n.A)("HomePage","/app/www/pages/duplo/HomePage.tsx")},[]);let e=(0,A.A)(),t=(0,a.wA)(),r=(0,O.A)(),{showToast:s}=(0,$.CG)(),l=(0,o.Zp)(),d=(0,o.zy)(),{checkExperiment:c}=(0,L.A)(),{shouldRefreshHomefeed:u,clearRefreshFlag:h}=(0,ep.d)(),{experience:m}=(0,p.Rf)(40001),{experience:f}=(0,p.Rf)(1000115),{experience:x}=(0,p.Rf)(1000411),_=(0,a.d4)(({feeds:e})=>e.homefeed),g=(0,a.d4)(({homefeedTabUI:e})=>e.activeTabBoardId),b=(0,a.d4)(({homefeedTabUI:e})=>e.activeTabIndex),{isAuth:w,isLimitedLogin:v}=r,y=r.isAuth?r.id:void 0,S=r.isAuth?r.username:void 0,j=!!r.isAuth&&r.isPartner,I=(0,q.qJ)(),k=Array.isArray(_)?_:[],E=!I&&k[0]&&"story"===k[0].type?k[0]:null,M=(0,a.d4)(({stories:e})=>E?e[E.id]:null),C=M&&M.story_type&&M.story_type.startsWith("boards_more_ideas_feed_upsell")?M:null,T=k.find(({type:e})=>"home_feed_tabs"===e)?.tabs,{data:z}=(0,U.A)(w&&c("mweb_hf_core_actions_header",{dangerouslySkipActivation:!0}).anyEnabled?{name:"UserResource",options:{user_id:r.id,field_set_key:"core_actions_header"}}:null),H=(0,q.M)();(0,F.A)(d,s,e);let R={checkExperiment:c,currentUserId:y,currentUsername:S,dispatchViewedSharedPins:e=>t({type:"SET_VIEWED_SHARED_PINS",payload:{pins:e}}),everythingFeedExperience:m,navigate:l,i18n:e,isAuthenticated:w,isEligibleForCoreActionsHeader:z?.is_eligible_for_core_actions_header,isLimitedLogin:v,isMobile:H,isPartner:j,location:d,moreIdeasStory:C,newUserWelcomeStoryExperience:x,selectedTabBoardId:g,selectedTabIndex:b,showToast:s,tabBoards:T??eW,webMobileHomeFeedTakoverExperience:f,shouldRefreshHomefeed:u,clearRefreshFlag:h};return(0,P.jsx)(eB,{...R})}},457494(e,t,r){r.d(t,{Vf:()=>s,bg:()=>i,jC:()=>o,ks:()=>l,mA:()=>a});var n=r(802424);let i="homefeed",a="feed_home",o="UserHomefeedResource",s={field_set_key:"mobile_grid_item",prepend:!1},l=(0,n.A)(s)},934949(e,t,r){r.d(t,{Y:()=>n});let n=(e,t)=>({type:"SET_ACTIVE_HOMEFEED_TAB",payload:{boardId:e,index:t}})},168257(e,t,r){r.d(t,{AD:()=>u,X2:()=>d,e6:()=>s,sN:()=>l,x2:()=>c});var n=r(684059),i=r(901856),a=r(375114);function o(e,t,r,i){return n.A.create("UserFollowResource",{user_id:e,invite_code:i||void 0,aux_data:t?{pin_id:t}:void 0,client_tracking_params:r})}function s(e,t=null,r,n){return i=>{o(e,t,r,n).callCreate().catch(()=>i((0,a.pV)(e,!1))),i((0,a.pV)(e,!0))}}function l(e,t=null,r,n){return async i=>{i((0,a.pV)(e,!0)),await o(e,t,r,n).callCreate().catch(t=>{throw i((0,a.pV)(e,!1)),t})}}function d(e,t=null,r){return n=>{o(e,t,r).callDelete().catch(()=>n((0,a.pV)(e,!0))),n((0,a.pV)(e,!1))}}function c(e,t=null,r){return async n=>{n((0,a.pV)(e,!1)),await o(e,t,r).callDelete().catch(t=>{throw n((0,a.pV)(e,!0)),t})}}let p=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),u=e=>t=>{e.length>0&&((0,i.A)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e}}).catch(()=>t(p(e,!1))),t(p(e,!0)))}},375114(e,t,r){r.d(t,{Bt:()=>c,Fq:()=>u,LR:()=>a,Wi:()=>h,oH:()=>p,om:()=>d,pV:()=>o,yX:()=>s});var n=r(901856),i=r(534907);function a(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}let o=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),s=(e,t)=>({type:"USER_FOLLOWING_COUNT",payload:{id:e,following:t}}),l=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),d=({id:e,orbacSubjectId:t,blockSource:r,blockContext:i,logContextEvent:a})=>async o=>{o(l(e,!0));let s=await (0,n.A)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"PUT",data:{orbac_subject_id:t,block_source:r,block_context:i}}).catch(()=>o(l(e,!1)));return a({event_type:54,object_id_str:e}),s},c=(e,t)=>async r=>{r(l(e,!1));let i=await (0,n.A)({url:"/v3/users/{blocked_user}/block/",urlParams:{blocked_user:e},method:"DELETE"}).catch(()=>r(l(e,!0)));return t({event_type:55,object_id_str:e}),i};function p(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}let u=(e,t)=>()=>(0,n.A)({url:"/v3/users/state/{state}/",urlParams:{state:e},method:"PUT",data:{value:t}}),h=(e,t,r)=>(a,o)=>{(0,n.A)({url:"/v3/users/me/",method:"POST"}).then(()=>{r({event_type:48,object_id_str:o().session.userId}),e(),(0,i.A)()},t)}},429759(e,t,r){r.d(t,{A:()=>i});var n=r(671468);function i({children:e,storyId:t}){let r=(0,n.d4)(({stories:e})=>e[t]);return r&&e(r)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/20258.en_GB-43cffd4856e7ef6d.mjs.map