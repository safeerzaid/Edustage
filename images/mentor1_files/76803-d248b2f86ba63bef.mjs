(self.modernJsonp=self.modernJsonp||[]).push([["76803"],{618475(e,a,l){l.d(a,{aj:()=>A,Ay:()=>C,ss:()=>L,Ic:()=>y});var n=l(236507);let o=Object.freeze({DAILY:1,WEEKLY:2,BIWEEKLY:3,MONTHLY:4}),t=Object.freeze({ONE_WEEK:"7D",ONE_MONTH:"30D",THREE_MONTH:"90D",SIX_MONTH:"180D",ONE_YEAR:"365D",TWO_YEAR:"730D"}),i=new n.rk(10),s=new n.K5([i]),_=new n.K5([s]),r=new n.K5([_]),d=new n.K5([r]),u=Object.freeze({AGE_18_24:"18-24",AGE_21_24:"21-24",AGE_18_20:"18-20",AGE_25_34:"25-34",AGE_35_44:"35-44",AGE_45_49:"45-49",AGE_50_54:"50-54",AGE_55_64:"55-64",AGE_65_PLUS:"65+"}),p={[u.AGE_18_20]:2,[u.AGE_21_24]:3,[u.AGE_25_34]:4,[u.AGE_35_44]:5,[u.AGE_45_49]:6,[u.AGE_50_54]:7,[u.AGE_55_64]:8,[u.AGE_65_PLUS]:9,AGE_UNSUPORTED:10},c=t.ONE_MONTH,E={[t.ONE_WEEK]:o.DAILY,[t.ONE_MONTH]:o.DAILY,[t.THREE_MONTH]:o.WEEKLY,[t.SIX_MONTH]:o.WEEKLY,[t.ONE_YEAR]:o.WEEKLY},S=Object.freeze({DETAIL:"/detail/",HOME:"/"}),g={[t.ONE_WEEK]:1,[t.ONE_MONTH]:2,[t.THREE_MONTH]:3,[t.SIX_MONTH]:4,[t.ONE_YEAR]:5},m={[t.ONE_WEEK]:7,[t.ONE_MONTH]:30,[t.THREE_MONTH]:90,[t.SIX_MONTH]:180,[t.ONE_YEAR]:365,[t.TWO_YEAR]:730},T={MALE:"male",FEMALE:"female",UNSPECIFIED:"unspecified"},b={...T,UNSPECIFIED:"unknown"},O={[T.MALE]:0,[T.FEMALE]:1,[T.UNSPECIFIED]:2},h={TOP_TRENDS_INTERNAL:"1",GROWING_TRENDS_INTERNAL:"2",BREAKOUT_TRENDS_INTERNAL:"3",SEASONAL_TRENDS_INTERNAL:"4",TOP_MONTHLY_TRENDS:"1",TOP_YEARLY_TRENDS:"2",GROWING_TRENDS:"3",SEASONAL_TRENDS:"4"},I=Object.freeze({[h.TOP_TRENDS_INTERNAL]:"Top Trends",[h.GROWING_TRENDS_INTERNAL]:"Growing Trends",[h.BREAKOUT_TRENDS_INTERNAL]:"Breakout Trends"}),v={[h.TOP_MONTHLY_TRENDS]:"Top Monthly Trends",[h.TOP_YEARLY_TRENDS]:"Top Yearly Trends",[h.GROWING_TRENDS]:"Growing Trends",[h.SEASONAL_TRENDS]:"Seasonal Trends"};Object.freeze({L1:1,L2:2,L3:3}),Object.freeze({ONE_MONTH:2,THREE_MONTHS:3,SIX_MONTHS:4,ONE_YEAR:5}),Object.freeze({HIGH_VOLUME:1,GROWTH:2});let w=Object.freeze({HIGH_VOLUME:"HIGH_VOLUME",GROWTH:"GROWTH"});Object.freeze({NC_ENGAGEMENT_PLUS_ACTIVE_FOLLOWERS_90d:1});let y=`https://trends.pinterest.com${S.DETAIL}`,N=Object.freeze([t.ONE_MONTH,t.ONE_YEAR,t.THREE_MONTH,t.ONE_MONTH]),L="https://i.pinimg.com/originals/3d/2f/41/3d2f41008f24a1839f25021cf78e908d.png",A=444,C={PAGES:S,TOAST_DURATION:3e3,Z_INDEX_TRENDS_HEADER:i,Z_INDEX_TRENDS_FEEDBACK_BUTTON:s,Z_INDEX_TRENDS_AUTOCOMPLETE_BOX:_,Z_INDEX_TRENDS_SEARCH_FORM:r,Z_INDEX_TRENDS_TOOLTIP:d,DEPRECATED_GESTALT_COLORS_HEX_VALUES:{red:"var(--base-color-red-300)",white:"#FFF",lightGray:"#EFEFEF",gray:"#8E8E8E",darkGray:"#333",green:"#0FA573",pine:"#0A6955",olive:"#364A4C",blue:"#4A90E2",navy:"#004B91",midnight:"#133A5E",purple:"#B469EB",orchid:"#8046A5",eggplant:"#5B2677",maroon:"#6E0F3C",watermelon:"#F13535",orange:"#E3780C"},MOBILE_MAX_WIDTH:576,FEEDBACK_CHAR_LIMIT:3e3,DEFAULT_CARD_WIDTH:357,DEFAULT_CARD_HEIGHT_RATIO:.65,FIVE_CARD_WIDTH:204,FIVE_CARD_HEIGHT_RATIO:.74,FIVE_LEFT_IMAGE_WIDTH_RATIO:.65,SMALL_CARD_WIDTH:220,DEFAULT_DAYS:"360",CARD_PADDING:10,FIVE_CARD_PADDING:24,PAGE_PADDING:160,MOBILE_HEIGHT:280,DESKTOP_HEIGHT:340,DESKTOP_PREDICTION_CHART_HEIGHT:480,DESKTOP_MOMENT_PREDICTION_CHART_HEIGHT:440,MOBILE_WIDTH:360,DESKTOP_WIDTH:900,CARD_WIDTH_PLUS_PADDING:377,AGE_21_PLUS:"21+",DEFAULT_COUNTRY:"US",TOP_TRENDS_PARAMETER:"topTrendsParameter",DEFAULT_DESIRED_CARD_PER_ROW:3,EXTERNAL_DESIRED_CARD_PER_ROW:5,DATE_FILTER_FORMAT:"MM/DD/YY",ALL:"all",TRENDS_CAMPAIGN_PLANNER:"TRENDS_CAMPAIGN_PLANNER",TRENDS:"TRENDS",PICK:"pick",PLUS_ICON:"+",MINUS_ICON:"-",FILTERABLE_TABLE_ROWS_PER_PAGE:Object.freeze({FIFTY:"50",ONE_HUNDRED:"100",TWO_HUNDRED_FIFTY:"250"}),DEBOUNCE_MILISECONDS:300,FILTER_SECTION:{FILTER_BAR_WIDTH:270,FILTER_BAR_MIN_HEIGHT:432,DATE_RANGE_WIDTH:178,DATE_PICKER_WIDTH:166,EXTERNAL_FILTER_BAR_WIDTH:225},DEFAULT_NUM_TOP_TRENDS:250,DEFAULT_EXTERNAL_NUM_TOP_TRENDS:50,GENDER:T,GENDER_MP:b,GENDER_TO_THRIFT_CONST:O,AGE_BUCKETS:u,AGE_TO_THRIFT_CONST:p,THRIFT_TO_AGE_CONST:{2:"18-20",3:"21-24",4:"25-34",5:"35-44",6:"45-49",7:"50-54",8:"55-64",9:"65+"},THRIFT_TO_GENDER_CONST:{0:"male",1:"female",2:"unknown"},LOOK_BACK_WINDOW:t,LOOK_BACK_WINDOW_DEFAULT:c,LOOK_BACK_WINDOW_TO_THRIFT_CONST:g,LOOK_BACK_WINDOW_TO_AGGREGATION_CONST:E,LOOK_BACK_WINDOW_TO_DAYS:m,TRENDS_TYPES:h,TRENDS_INTERNAL_TYPES_VALUES_TO_LABELS:I,TRENDS_EXTERNAL_TYPES_VALUES_TO_LABELS:v,URL_PARAM_BOOLEAN_VALUES:{TRUE:"true",FALSE:"false"},SEASONALITY_SCORE_THRESHOLD:.825,SEASONALITY_SCORE_OLD_THRESHOLD:.75,SEASONALITY_SCORE_THRESHOLD_CUTOVER_DATE:"2024-04-08",SORT_ORDER:Object.freeze({DESC:"desc",ASC:"asc"}),FILTER_TYPES:Object.freeze({OPPORTUNITY:"OPPORTUNITY",CAMPAIGN:"CAMPAIGN"}),SORT_BY:Object.freeze({TREND_RANK:"TREND_RANK",TOTAL_SEARCH:"TOTAL_SEARCH",WEEKLY_CHANGE:"WEEKLY_CHANGE",MONTHLY_CHANGE:"MONTHLY_CHANGE",YEARLY_CHANGE:"YEARLY_CHANGE"}),URL_JOIN_SIGN:"|",CONCATENATED_STRING_SEPARATOR:", ",CSV_SEPARATOR:",",TERM_ALL:"all",DEBOUNCE_AUDIENCE_SIZE:1e3,MAX_ADD_TERMS:50,L1_SECTIONS:{ALL:{value:"all",label:"All categories"},FOOD_AND_DRINK:{value:"foodanddrink",label:"Food and drinks",id:"918530398158"},BEAUTY:{value:"beauty",label:"Beauty",id:"935541271955"},HOME_DECOR:{value:"homedecor",label:"Home decor",id:"935249274030"},FASHION:{value:"fashion",label:"Fashion",id:"948967005229"},TRAVEL:{value:"travel",label:"Travel",id:"908182459161"},ART:{value:"art",label:"Art",id:"961238559656"},QUOTES:{value:"quotes",label:"Quotes",id:"948192800438"},ENTERTAINMENT:{value:"entertainment",label:"Entertainment",id:"953061268473"},DIY_AND_CRAFTS:{value:"diyandcrafts",label:"DIY and crafts",id:"934876475639"},HEALTH:{value:"health",label:"Health",id:"898620064290"},WEDDINGS:{value:"weddings",label:"Wedding",id:"903260720461"},EVENT_PLANNING:{value:"eventplanning",label:"Event planning",id:"941870572865"},LAWN_AND_GARDEN:{value:"lawnandgarden",label:"Gardening",id:"909983286710"},ANIMALS:{value:"animals",label:"Animals",id:"925056443165"},PARENTING:{value:"parenting",label:"Parenting",id:"920236059316"},EDUCATION:{value:"education",label:"Education",id:"922134410098"},VEHICLES:{value:"vehicles",label:"Vehicles",id:"918093243960"},DESIGN:{value:"design",label:"Design",id:"902065567321"},SPORTS:{value:"sports",label:"Sport",id:"919812032692"},ELECTRONICS:{value:"electronics",label:"Electronics",id:"960887632144"},FINANCE:{value:"finance",label:"Finance",id:"913207199297"},ARCHITECTURE:{value:"architecture",label:"Architecture",id:"918105274631"}},BASE_BANNER_HEIGHT:627,COUNT_TYPES:{COUNT:"count",NORMALIZED_COUNT:"normalizedCount"},EXTERNAL_LOOKBACK_WINDOW_MAPPED_TREND_TYPES:N,FEEDBACK_SLACK_CHANNEL:"slack://channel?team=T024LJUGB&id=CKBF9A6EL",MAX_TERMS:4,COUNTRY_FULL_NAMES:{US:"the United States",CA:"Canada",GB:"the United Kingdom",IN:"India",AU:"Australia"},CONCATENATED_INTERESTS_PARAM_KEY:"concatenatedInterests",FILTER_INTEREST_IDS_PARAM_KEY:"filterInterestIds",FILTER_AGE_IDS_PARAM_KEY:"filterAgeIds",FILTER_GENDERS_PARAM_KEY:"filterGenders",EXPORT_TYPES:{DISCOVER:"discover",DETAILS:"details",CAMPAIGN:"campaignPlan"},EXPORT_NA:"N/A",EXPORT_ALL:"All",EXPORT_NONE:"None",ENGLISH_LANGUAGE_CODE:"en",KEYWORD_SPLIT_CHARACTER:`
`,COUNTRY_PREFIX_POSTAL_CODE_SEPARATOR:":",EXPORT_MESSAGE_HEADER:"Export in progress",DEPRECATED_COLOR_VALUES:["blue","green","purple","orange","red","maroon","orchid","navy","pine","watermelon"],EXPORT_MESSAGE:"This should only take a few seconds. Don't go back.",POPULAR_PINS_MAXIMUM_IMAGES:9,MAXIMUM_TERM_IMAGES_BULK_SIZE:250,TERM_IMAGE_MEMCACHE_KEY_PREFIX:"timg:",EXTRA_TERM_IMAGES:80,DESIRED_PIN_IMAGE_SIZE:"236x",PIN_IMAGE_URL_PREFIX:"https://i.pinimg.com/",PIN_IMAGE_URL_SUFFIX:".jpg",PIN_IMAGE_DEFAULT_CACHE_TIME_S:86400,DOUBLE_ROW_CARD_WIDTH:170,TOP_TRENDS_CAROUSEL_TERMS:9,TRENDS_FOR_PINS_MODULE_BREAK_WIDTH:1380,TRENDS_SEARCHBAR_HEIGHT:193,TOP_TRENDS_CAROUSEL_EXTENDED_TERMS:30,TOP_TRENDS_UNAUTH_CAROUSEL_TERMS:25,TOP_TRENDS_DOUBLE_ROW_MAX_TERMS:6,DETAILS_PAGE_SEARCH_OVERTIME_SUBTITLE_WIDTH:750,PT_IMAGE_SIZE:"236x",FILTERED_TABLE_IMAGE_SIZE:"30x30",TOP_TREND_CAROUSEL_IMAGE_SIZE:"236x",MOMENT_IMAGE_CARD_SIZE:"70x70",PERSONALIZED_TREND_TYPES:w,PREDICTION_SUPPORTED_COUNTRIES:["US"],MOMENT_PREDICTION_LOOKBACK_DAYS:730,MILLISECONDS_PER_DAY:864e5}},301135(e,a,l){l.d(a,{YQ:()=>o});var n=l(296540);l(105367),(0,n.createContext)({isUpsellUnauthModalOpen:!1,openUpsellUnauthModal:()=>{},closeUpsellUnauthModal:()=>{}}),Object.freeze({IS_SEASONAL:"seasonal",TERMS:"terms",COUNTRY:"country",EDITORIAL_INDEX:"editorial",SHOULD_MOCK:"shouldMock",EMPTY_HERO_BANNER_MOCK:"emptyHeroBanner",TRENDS_PRESET:"trendsPreset",ADVERTISER_ID:"advertiserId",END_DATE:"endDate",SELECTED_END_DATE:"selectedEndDate",AGE_BUCKET:"ageBucket",GENDER:"gender",LOOK_BACK_WINDOW:"lookbackWindow",COUNTS_TYPE:"countsType",DATE_RANGE:"dateRange",AGGREGATION_LEVEL:"aggregationLevel",SORT_BY:"sortBy",SORT_ORDER:"sortOrder",L1_INTEREST_IDS:"l1InterestIds",L2_INTEREST_IDS:"l2InterestIds",L3_INTEREST_IDS:"l3InterestIds",KEYWORDS_TO_EXCLUDE:"keywordsToExclude",KEYWORDS_TO_INCLUDE:"keywordsToInclude",RANKING_METHOD:"rankingMethod",AGE_DETAILS_PAGE:"ageDetailsPage",GENDER_DETAILS_PAGE:"genderDetailsPage",TOP_TRENDS:"topTrends",MOMENTS:"moments",HAS_PREDICTIONS:"hasPredictions",SHOW_PREDICTION:"showPrediction",URL_PARAM_UTM_VALUES:Object.freeze({UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CAMPAIGN:"utm_campaign",UTM_CONTENT:"utm_content",UTM_TERM:"utm_term",UTM_CREATIVE:"utm_creative"}),EVENT:"event",GRAPH_EVENT:"graphEvent",PRODUCT_CATEGORIES:"product_categories",PAGE_NUMBER:"page",TOPIC_INTEREST_IDS:"topicInterestIds",PARENT_PRODUCT_CATEGORY:"parentProductCategory",SHOW_SIDE_NAV:"showSideNav",VIEW:"view",TAB:"tab",SHOW_UNAUTH_MODAL:"showUnauthModal",NEXT_URL:"nextUrl"}),l(632321),l(449798),l(534955),l(871211);let o=(e,a)=>{let l=(0,n.useRef)(void 0),o=()=>{l.current&&clearTimeout(l.current)};return(0,n.useEffect)(()=>o,[]),n=>{o(),l.current=setTimeout(()=>{e(n)},a)}}},105367(e,a,l){l.d(a,{A:()=>_});var n=l(296540),o=l(278106),t=l(267722),i=l(144837),s=l(221077);let _=function(e,a,l){let _=(0,o.Zp)(),{search:r,pathname:d="/"}=(0,o.zy)(),u=(0,n.useMemo)(()=>new URLSearchParams(r),[r]),p=n=>{let o="reset"!==a?(0,s.A)(window.location.search):{},r=(0,t.Wm)({..."resetWithoutRefresh"===a?{}:o,[e]:n});if(!a)return;let u=l?`${l}`:d,p=(0,i.A)(u,{...r});("push"===a||"resetWithoutRefresh"===a)&&_(p),"replace"===a&&_(p,{replace:!0}),"reset"===a&&(window.location.href=p),"replaceWithoutRefresh"===a&&o[e]!==n&&window.history.replaceState(null,"",p)};return function(a){"function"==typeof a?p(a((0,t.B0)(u.get(e)))):p(a)}}},267722(e,a,l){l.d(a,{Bz:()=>s,B0:()=>i,Wm:()=>t});var n=l(618475);let o=["US","CA","IT+ES+PT+GR+MT","IT","ES","DE+AT+CH","DE","GB+IE","FR","SE+DK+FI+NO","NL+BE+LU","PL+RO+HU+SK+CZ","MX+AR+CO+CL","CO","AR","MX","BR","AU+NZ","JP","ID","IN","MY","PH","TH","SA","EG","TR","KR","AE+SA+KW+QA+OM+BH+EG+IQ+DZ","IL+NG+PK+ZA+TR+MA+IN","CR+DO+EC+GT+PE","CY+CZ+GR+HU+MT+PL+RO+SK"];n.Ay.FILTER_INTEREST_IDS_PARAM_KEY,n.Ay.FILTER_AGE_IDS_PARAM_KEY,n.Ay.FILTER_GENDERS_PARAM_KEY,Object.freeze({UTM_SOURCE:"utm_source"});let t=e=>{let a={};for(let l in e){let n=e[l];null!==l&&""!==l.trim()&&null!=n&&""!==n.toString().trim()&&(a[l]=n)}return a},i=e=>e&&null!=e&&/^\d+$/.test(e.toString())?parseInt(e.toString(),10):e,s=(e,a)=>o.includes(e)?a[e]:void 0},320384(e,a,l){l.d(a,{M_:()=>s,SS:()=>o,by:()=>i,lq:()=>n});let n=e=>/instagram/i.test(e||""),o=e=>n(e)||/facebook/i.test(e||"")||/line/i.test(e||"")||/wechat/i.test(e||""),t="[Pinterest/Android]",i=e=>(e||"").includes("[Pinterest/iOS]")||(e||"").includes(t),s=e=>(e||"").includes(t)},684078(e,a,l){l.d(a,{A:()=>o});var n=l(622165);function o(e){let{expName:a,anyEnabled:l,group:o}=function({experimentsClient:e,skipActivation:a}){let{checkExperiment:l}=e,n=l("web_masonry_v2",{dangerouslySkipActivation:a});return n.group?{expName:"web_masonry_v2",...n}:{expName:"",anyEnabled:!1,group:""}}({experimentsClient:(0,n.A)(),skipActivation:e?.skipActivation??!1});return{expName:a,anyEnabled:l,group:o,isMeasureAllEnabled:"enabled_measure_all"===o||"enabled_measure_all_impression_fix"===o,isImpressionFixEnabled:"control_impression_fix"===o||"enabled_impression_fix"===o||"enabled_measure_all_impression_fix"===o}}},706397(e,a,l){l.d(a,{bi:()=>h,g$:()=>I,kF:()=>T});var n=l(296540),o=l(534955);let t=["ar","he"];var i=l(632321),s=l(684078),_=l(141716),r=l(622165),d=l(568677),u=l(990213),p=l(480819),c=l(407242),E=l(275386),S=l(646844),g=l(840085);let m=0,T=()=>m,b={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"editorialBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}},O=({events:e,startTime:a,endTime:l})=>e?.filter(e=>e>=a&&e<=l)||[];function h({carouselData:e,closeupImpressionType:a,closeupNavigationType:l,componentType:T,contextLogData:h,clientTrackingParams:I,duploShouldTrackPinEvents:v,elementType:w,impressionAuxFields:y,inImpressionExp:N,impressionType:L,impressionsFramework:A,isPaused:C,loggingId:R,objectIdStr:P,slotIndex:D,trackCarousel:M,viewData:U,viewParameter:f,viewType:G,isPromoted:k,storyPinProductEventData:x}){let{logContextEvent:F}=(0,i.o)(),{logMrcVideoAdEventOnPlay:H}=(0,u.y)(),{addImpression:W}=(0,p._1)()||{},{logStat:B}=(0,c.xI)(),K=(0,E.A)(),q=(0,d.qJ)(),{isRTL:V}=(()=>{let{locale:e}=(0,o._8)();return{isRTL:(0,n.useMemo)(()=>{let a=(e??"").split("-")[0];return t.includes(a)},[e])}})(),{checkExperiment:Y}=(0,r.A)(),X=A||_.A,j=(0,n.useRef)(null),$=(0,n.useRef)(e=>{});$.current=n=>{let o=b[L],t=o.idType,i={clientTrackingParams:I,endTime:n.endTime,[t]:R,slotIndex:D,time:n.startTime,renderDuration:n.endTime-n.startTime,type:a,...y,forcedExit:"removed"===n.forcedExit?0:void 0};if("Pin"===L){m+=1;let e=[],a=n.visibleEvents||new Map,l=n.hiddenEvents||new Map;(y&&y.isPromoted||k)&&[1,50,80,2,102].forEach(o=>{let t=O({events:a.get(o),startTime:n.startTime,endTime:n.endTime}),i=O({events:l.get(o),startTime:n.startTime,endTime:n.endTime});t.forEach(a=>{e.push({type:o,time:a||0,visible:!0})}),i.forEach(a=>{e.push({type:o,time:a||0,visible:!1})})}),i={...i,pinCellWidth:n.pinCellWidth||0,pinCellHeight:n.pinCellHeight||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight,visibleEvents:e.sort((e,a)=>e.time-a.time)};let o=Y("web_imp_col_data").anyEnabled;if(j.current&&o){let e=j.current.getBoundingClientRect(),a=window.scrollX||document.documentElement.scrollLeft,l=e.left+a;h={...h||{},number_of_columns:i.windowWidth&&i.pinCellWidth?Math.round((i.windowWidth-(V&&q?0:K))/i.pinCellWidth):null},i.columnIndex=i.pinCellWidth?Math.round((l-(V&&q?0:K))/i.pinCellWidth):void 0}y?.nearDupSignature&&W&&T&&[13007,13176,68].includes(T)&&W(y.nearDupSignature)}let s={component:T,object_id_str:P,view_type:G,view_data:U||{},view_parameter:f};if(M)e&&M&&F({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...i,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...s,aux_data:{...h}});else{let e={clientTrackingParams:I,event_type:o.eventType,...s,element:w,event_data:{[o.impressionType]:"Story"===L?i:[i],...x?{storyPinProductEventData:x}:{}},aux_data:{closeup_navigation_type:l,...h}};F(e),H(e)}v&&B("log_pin_impression")};let{expName:Q,group:z}=(0,s.A)({skipActivation:!0}),Z=(0,d.Ay)(),J=(0,g.AJ)(),{isAuthenticated:ee}=(0,o._8)(),ea=(0,n.useCallback)(()=>{let e=!1;try{let{current:a}=j;if(a instanceof HTMLElement&&(!k||a.getElementsByTagName("img").length>0)){let l=X.start(a);l.onExitViewport($.current).setDebugId(R||"unknown"),v&&l.onEnterViewport(()=>{B("log_pin_impression_track_enter_viewport")}),e=!0,z&&(0,S.GV)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:Z,experimentName:Q,group:z,handlerId:J,isAuthenticated:ee,slotIndex:D??"unknown"}})}}catch{window.console.error('Can only track impressions for type "HTMLElement"')}v&&B("log_pin_impression_track",{didStartTracking:e})},[j.current]);return(0,n.useEffect)(()=>(N&&!X.inExperiment&&X.setExperimentStatus(!0),C||ea(),()=>{let{current:e}=j;e instanceof HTMLElement&&(!k||e.getElementsByTagName("img").length>0)&&X.stop(e)}),[C,ea]),j}let I=({children:e,...a})=>e({impressionTrackerRef:h(a)})},233284(e,a,l){l.d(a,{F:()=>t,I:()=>o});var n=l(256623);function o(e,a){(0,n.A)("ðŸŽ¯ ENGAGEMENT_SCORE_CALCULATED",{trigger:e,...a})}function t(e,a){(0,n.A)("desktop"===e?"DESKTOP_UPSELL_DECISION":"MOBILE_UPSELL_DECISION",a)}},364270(e,a,l){l.d(a,{h:()=>t,w:()=>o});var n=l(182835);function o({PES:e,NUS:a,conversionIntentLevel:l,triggerAction:o,deviceType:t}){(0,n.PM)("engagement_score.calculated",{engagement_score:e,upsell_negative_score:a,user_intent_bucket:l,upsell_type_tag:"conversion",trigger_action:o,device_type:t})}function t({upsellType:e,decision:a,intentLevel:l,PES:o,NUS:t,experimentVariant:i}){(0,n.PM)("upsell.decision_with_intent",{upsell_type:e,decision:a,intent_level:l,pes:o,nus:t,experiment_variant:i})}},512581(e,a,l){l.d(a,{Ay:()=>I,kX:()=>T,mz:()=>h,vp:()=>c});var n=l(296540),o=l(671468),t=l(126439),i=l(320384),s=l(706397),_=l(693117),r=l(192102),d=l(646844);let u=Date.now(),p=()=>(0,o.d4)(e=>e.upsell?.mWebSignupModal.modal.isShown??!1),c=()=>(0,o.d4)(e=>e.upsell?.modal),E=()=>(0,s.kF)(),S=()=>Date.now()-u,g=()=>(0,o.d4)(e=>e.upsell?.mWebSignupModal.isUnauthSharingModalsShown??!1),m=()=>(0,o.d4)(e=>!!e.upsell?.mWebSignupModal.modalHasShown),T=()=>(0,o.d4)(e=>e.upsell?.mWebSignupModal),b=Object.freeze(["CO","ID"]),O=e=>{if(!(0,i.SS)(e))return!1;let a=(0,_.V2)();return a.getItem(t.Ng)||((0,d.GV)("mobile_signup_modal.rules.suppress_for_social_in_app_browser"),a.setItem(t.Ng,"1")),!0},h=({isModalShown:e,isUnauthSharingModalsShown:a,modalHasShown:l,country:n,userAgent:o})=>!e&&!(a||l&&b.includes(n)||(0,r.K)()||O(o));function I(){let e,a,l,t,i=p(),s=(0,o.d4)(e=>e.upsell?.mWebSignupModal.modal),_=(0,o.d4)(e=>e.upsell?.mWebSignupModal.upsellEligibleNavigationCount);return{isModalShown:i,modal:s,upsellEligibleNavigationCount:_,isUnauthSharingModalsShown:g(),modalHasShown:m(),isUpsellEnabledGlobally:(e=p(),a=g(),l=m(),t=(0,o.d4)(e=>e.currentUserTracker),(0,n.useCallback)(()=>!e&&!(({isUnauthSharingModalsShown:e,modalHasShown:a,currentUserTracker:l})=>{let{country:n}=l,o=l.userAgent.raw;return e||a&&b.includes(n)||(0,r.K)()||O(o)})({isUnauthSharingModalsShown:a,modalHasShown:l,currentUserTracker:t}),[e,a,l,t])),getPinImpressionCount:E,getSessionDuration:S}}},799596(e,a,l){l.d(a,{F_:()=>s,GY:()=>n,PO:()=>o,_k:()=>i,fI:()=>_,vR:()=>t});let n="RECORD_NAVIGATIONAL_PAGE",o="UPDATE_LATEST_L1_VERTICAL",t="RESET_UPSELL_TRIGGER_STATE",i="RECORD_SOCIAL_PIN_LANDING_PAGE",s="TRIGGER_SOCIAL_DELAY_MODAL",_="TRIGGER_SOCIAL_SCROLL_MODAL"},627203(e,a,l){l.d(a,{JR:()=>C,tj:()=>R,wz:()=>P});var n=l(104735),o=l(445349),t=l(233284),i=l(364270),s=l(799596),_=l(556596);let r="dweb_eoq_q3_standard",d="dweb_eoq_q3_advanced",u="mweb_eoq_q3_standard",p="mweb_eoq_q3_advanced",c="mweb_eoq_q4_advanced_ucan",E="mweb_eoq_q4_emergency_ucan",S="mweb_eoq_q4_advanced_non_ucan",g="mweb_eoq_q4_emergency_non_ucan",m="dweb_eoq_q4_advanced_ucan",T="dweb_eoq_q4_emergency_ucan",b="dweb_eoq_q4_advanced_non_ucan",O="dweb_eoq_q4_emergency_non_ucan",h=[{bundleId:"dweb_eoq_q3_standard",experimentKey:r,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}}}},{bundleId:"dweb_eoq_q3_advanced",experimentKey:d,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}}}},{bundleId:"mweb_eoq_q3_standard",experimentKey:u,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}}}},{bundleId:"mweb_eoq_q3_advanced",experimentKey:p,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_advanced_ucan",experimentKey:c,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_emergency_ucan",experimentKey:E,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_advanced_non_ucan",experimentKey:S,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_emergency_non_ucan",experimentKey:g,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"dweb_eoq_q4_advanced_ucan",experimentKey:m,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_advanced_non_ucan",experimentKey:b,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_emergency_ucan",experimentKey:T,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_emergency_non_ucan",experimentKey:O,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}}];function I(e,a){let l=h.filter(l=>{if(!l.active||!l.overrides[e])return!1;switch(l.experimentKey){case r:return a("dweb_eoq_q3_standard").anyEnabled;case d:return a("dweb_eoq_q3_advanced").anyEnabled;case u:return a("mweb_eoq_q3_standard").anyEnabled;case p:return a("mweb_eoq_q3_advanced").anyEnabled;case c:return a("mweb_eoq_q4_advanced_ucan").anyEnabled;case E:return a("mweb_eoq_q4_emergency_ucan").anyEnabled;case S:return a("mweb_eoq_q4_advanced_non_ucan").anyEnabled;case g:return a("mweb_eoq_q4_emergency_non_ucan").anyEnabled;case m:return a("dweb_eoq_q4_advanced_ucan").anyEnabled;case T:return a("dweb_eoq_q4_emergency_ucan").anyEnabled;case b:return a("dweb_eoq_q4_advanced_non_ucan").anyEnabled;case O:return a("dweb_eoq_q4_emergency_non_ucan").anyEnabled;default:return!1}});return l[l.length-1]?.overrides[e]}let v=e=>({id:e.id,evaluate:function({ruleId:e,baseEvaluateFunction:a}){return l=>{let{checkExperiment:n,currentUserTracker:o}=l,t=n&&I(e,n)?.evaluateContextOverride||{},i=t[o?.channel??"default"]||t.default||{};return a((0,_.A)(l,i))}}({ruleId:e.id,baseEvaluateFunction:e.evaluate}),getNextState:function({ruleId:e,baseNextStateFunction:a}){return({action:l,state:n,decision:o})=>{let t=a({action:l,state:n,decision:o});if(!("payload"in l&&"object"==typeof l.payload&&null!==l.payload&&"checkExperiment"in l.payload))return t;let i="currentUserTracker"in l.payload?l.payload.currentUserTracker:void 0,s=I(e,l.payload.checkExperiment)?.stateOverride||{},r=s[i?.channel??"default"]||s.default||{};return 0===Object.keys(r).length?t:(0,_.A)(t,r)}}({ruleId:e.id,baseNextStateFunction:e.getNextState})});var w=l(240338);let y=["enabled","enabled_no_legal","enabled_copy_2"],N=["enabled_copy_2_no_legal","enabled_copy_2_with_legal"],L=["enabled_copy_2_no_legal","enabled_copy_2_with_legal","enabled_copy_2_no_legal_3_2","enabled_copy_2_with_legal_3_2"],A=(e,a)=>{let l={enabled_1:["high","medium"],enabled_2:["high"],enabled_3:["medium"],enabled_4:["medium","low"]}[a];return!!l&&l.includes(e||"unknown")},C={shouldShowRelatedPinsGradientUpsell:v({id:"desktop_related_pins_gradient_upsell_trigger",evaluate:({relatedPinsGradientUpsellEverShown:e,checkExperiment:a})=>{if(e)return!1;let l=a?.("ce_dweb_unauth_related_pins_limit");return!!l?.anyEnabled},getNextState:({state:e})=>({...e,showRelatedPinsGradientUpsell:!0,relatedPinsGradientUpsellEverShown:!0})}),shouldShowCloseupNavigationalModal:v({id:"closeup_navigational_modal_trigger",evaluate:({pinViewCount:e,navigationalPagesUpsellSeen:a,checkExperiment:l})=>!l?.("pc_no_navigational_upsell").anyEnabled&&(e??0)>=4&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"navigation_1",container:"closeup",reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowSaveModal:v({id:"save_modal_trigger",evaluate:()=>!0,getNextState:({action:e,state:a})=>({...a,pinSaveCount:a.pinSaveCount+1,pinId:e.payload.pinId,attributionLabel:e.payload.attributionLabel,showSaveModal:!0,modal:{isShown:!0,displayProps:{attributionLabel:e.payload.attributionLabel,container:"save",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",savePinId:e.payload.pinId,signupFlow:{type:"signup"},source:"saveButtonExp"}}})}),shouldShowNavigationalModal:v({id:"desktop_navigational_modal_trigger",evaluate:({uniqueNavigationalPagesSeen:e=[],navigationalPagesUpsellSeen:a,navigationalPagesViewThresholdDesktop:l,checkExperiment:n})=>!n?.("pc_no_navigational_upsell").anyEnabled&&e.length>=(l??4)&&!a,getNextState:({state:e,action:a})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_${a.payload.containerPage}`,container:a.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowNavigationalModalIntentBased:v({id:"desktop_navigational_modal_intent_trigger",evaluate:({navigationalPagesUpsellSeen:e,engagementScore:a,checkExperiment:l})=>{let n=l?.("engagement_score_v0_dweb");if(!n?.anyEnabled||e)return!1;let{conversionIntentLevel:o,PES:s,NUS:_}=a||{},r=A(o,n.group);return(0,t.F)("desktop",{variant:n.group,decision:r?"SHOW":"SKIP",intentLevel:o,PES:s||0,NUS:_||0,reason:r?`Intent ${o} in allowed list`:`Intent ${o} NOT in allowed list`}),(0,i.h)({upsellType:"navigation_desktop",decision:r?"show":"skip",intentLevel:o||"unknown",PES:s||0,NUS:_||0,experimentVariant:n.group}),r},getNextState:({state:e,action:a})=>{let{conversionIntentLevel:l,PES:n,NUS:o}=e.engagementScore||{};return{...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_intent_${l}_pes_${n||0}_nus_${o||0}`,container:a.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0}}}),shouldShowSignupModalOnCloseUpClick:v({id:"closeup_modal_trigger",evaluate:({modal:e,clickCloseUp:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_closeup",container:"pinWash",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickCloseUp:!0})}),shouldShowSignupModalOnClickContextMenuSaveButton:v({id:"context_menu_save_button_trigger",evaluate:({modal:e,clickContextMenuSaveButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>{let l;return l=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId},{...a,modal:{isShown:!0,displayProps:l},clickContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnClickCloseupSaveButton:v({id:"closeup_save_button_trigger",evaluate:({modal:e,clickCloseUpContextMenuSaveButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>{let l;return l=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId},{...a,modal:{isShown:!0,displayProps:l},clickCloseUpContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnContextMenuDownloadClick:v({id:"desktop_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:a,modal:l})=>!!((e||a)&&!l?.isShown),getNextState:({action:e,state:a})=>{let l;return l=e.payload.inDwebSwapDownloadUpsellExp?{signupFlow:{type:"login"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"lopDownloadUpsell",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"lopDownloadUpsell"}:{signupFlow:{type:"signup"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId},{...a,modal:{isShown:!0,displayProps:l},clickContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnCloseupDownloadClick:v({id:"closeup_download_button_trigger",evaluate:({limitReached:e,modal:a})=>!!(e&&!a?.isShown),getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId}},clickCloseUpContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource})}),shouldShowSignupModalOnFollowButtonClick:v({id:"follow_button_trigger",evaluate:({modal:e,clickFollowButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",container:e.payload.isContextualFollowEnabled?"follow":"upsellRules_unspecified_container",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:e.payload.isContextualFollowEnabled?"followButton":void 0}},clickFollowButton:!0})}),shouldShowSignupModalOnFollowingButtonClick:v({id:"following_button_trigger",evaluate:({modal:e,clickFollowingButton:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_following",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowingButton:!0})}),shouldShowSignupModalOnFollowersButtonClick:v({id:"followers_button_trigger",evaluate:({modal:e,clickFollowersButton:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_followers",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowersButton:!0})}),shouldShowLoginModalOnCommentComposerClick:v({id:"comment_composer_trigger",evaluate:({modal:e,clickCommentComposerUpsell:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"tap_unauth_comment_composer",container:"closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"commentComposer"}},clickCommentComposerUpsell:!0})}),shouldShowLoginModalOnRelatedPinOpenLinkClick:v({id:"related_pin_open_link_trigger",evaluate:({modal:e,clickRelatedPinOpenLinkUpsell:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"click_context_menu_related_pin_right_click_open_link_button",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickRelatedPinOpenLinkUpsell:!0})}),shouldShowLoginModalOnPinLinkClick:v({id:"pin_link_trigger",evaluate:({modal:e,pinLinkClickCount:a=0})=>!e?.isShown&&(2===a||a%5==0),getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"pinLinkClickHandler_tier1",container:"hybrid_clickthrough",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickPinLinkCount:e.payload.count})}),shouldShowSocialPinLandingModal:v({id:"social_pin_landing_modal_trigger",evaluate:({inviter:e,socialPinLandingModalShown:a,checkExperiment:l})=>{if(!e||a)return!1;let n=l?.("ce_dweb_unauth_splp_blocking").anyEnabled,o=l?.("ce_dweb_unauth_splp_blocking_no_delay").anyEnabled,t=l?.("ce_dweb_unauth_splp_blocking_3s").anyEnabled;return!!(n||o||t)},getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.type===s.F_?`delay_${e.payload.containerPage}`:`scroll_${e.payload.containerPage}`,container:e.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},socialPinLandingModalShown:!0})}),shouldShowScrollingBox:{id:"desktop_scrolling_box_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},R={shouldShowSaveEducationPopover:v({id:"mobile_save_education_popover_trigger",evaluate:({saveEducationPopoverEverShown:e,checkExperiment:a})=>{if(e)return!1;let{group:l}=a?.("ce_mweb_unauth_social_feature_education")||{};return!!l?.startsWith("enabled_group_board")},getNextState:({state:e})=>({...e,showSaveEducationPopover:!0,saveEducationPopoverEverShown:!0})}),shouldShowReplyToSenderSheet:v({id:"mobile_reply_to_sender_sheet_trigger",evaluate:({replyToSenderSheetEverShown:e,checkExperiment:a})=>{if(e)return!1;let{group:l}=a?.("ce_mweb_unauth_social_feature_education")||{};return!!l?.startsWith("enabled_reply_to_sender")},getNextState:({state:e})=>({...e,showReplyToSenderSheet:!0,replyToSenderSheetEverShown:!0})}),shouldShowRelatedPinsGradientUpsell:v({id:"mobile_related_pins_gradient_upsell_trigger",evaluate:({checkExperiment:e})=>!!e?.("ce_mweb_unauth_related_pins_limit").anyEnabled,getNextState:({state:e})=>({...e,showRelatedPinsGradientUpsell:!0})}),shouldAllowUnauthSave:v({id:"mobile_unauth_save_quota_check",evaluate:({isPPMAndroidUnauthExperience:e,isFromUnauthContextMenu:a,currentUnauthSaves:l=0,mobileUnauthSaveThreshold:n})=>!a&&!e&&l<(n??2),getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:e.payload.headingType,trigger:{attributionLabel:"extended_save_out_of_quota"===e.payload.headingType?"click_save_button_with_max_unauth_saves":e.payload.attributionLabel||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageNavigationalModal:v({id:"mobile_main_pin_image_modal",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:a,isModalCurrentlyShown:l,learningUpsellScenario:n,forceShowModal:o})=>{let t=n&&a&&!l&&(e?.("mweb_unauth_main_learning_pin_full_page").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced_row").anyEnabled||e?.("mweb_q2_mau_push_pc_emergency_row").anyEnabled||e?.("mweb_q2_mau_push_pc_eu_safe").anyEnabled);return n&&(o||!!t)},getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal?.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:"none",trigger:{attributionLabel:"navigation_main_pin_image_click",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageAppUpsell:{id:"mobile_main_pin_app_upsell_purple_banner",getNextState:({state:e})=>e,evaluate:({learningUpsellScenario:e,hasConversionUpsell:a,isLearningAppUpsellShown:l})=>a||!e?{shouldToggleAppUpsell:!1,currentlyShowing:!1,newState:!1}:{shouldToggleAppUpsell:!0,currentlyShowing:l,newState:!l}},shouldShowNavigationUpsell:v({id:"mobile_navigation_upsell",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:a,newLocation:l,isNavigationFromSwipe:n,currentNavigationCount:o,hasSeenModal:t,pageThreshold:i,isWashDismissible:s,canShowSignupModalOnRouteChange:_,navigationalPagesViewThresholdMobile:r,checkExperiment:d})=>{if(d?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let u=r||i||4;if(a)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!(e&&!n))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let p=!!l&&!!d&&(0,w.A)(d,l),c=d?.("mweb_feature_upsell_copy_visual_combination_v5")?.group??"",E="control"===c||L.includes(c),S=d?.("mweb_feature_upsell_copy_visual_combination_v4")?.group??"",g="control"===S||N.includes(S);if(!(l&&_?.(l,p)))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(!((o??0)>=u)||t)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let m=L.includes(c),T=N.includes(S),b=d?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",O=y.includes(b),h=d?.("mweb_feature_upsell_copy_visual_combination_v2"),I=h?.anyEnabled??!1;return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_${u}_${o}`,allowCloseOnOutsideClick:s,headingType:g?T?"mweb_feature_upsell_copy_visual_combination_v4":"none":E?m?"mweb_feature_upsell_copy_visual_combination_v5":"none":O?"mweb_feature_upsell_copy_visual_combination_v3":I?"mweb_feature_upsell_copy_visual_combination_v2":"none"}},getNextState:({state:e,decision:a})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType??"none",trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!a?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowNavigationUpsellIntentBased:v({id:"mobile_navigation_upsell_intent",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:a,newLocation:l,isNavigationFromSwipe:n,hasSeenModal:o,canShowSignupModalOnRouteChange:s,engagementScore:_,checkExperiment:r})=>{let d=r?.("engagement_score_v0_mweb");if(!d?.anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let u=!!l&&!!r&&(0,w.A)(r,l),p=r?.("mweb_feature_upsell_copy_visual_combination_v5")?.group??"",c="control"===p||L.includes(p),E=r?.("mweb_feature_upsell_copy_visual_combination_v4")?.group??"",S="control"===E||N.includes(E);if(a)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!e||n||!l||!s?.(l,u))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(o)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let{conversionIntentLevel:g,PES:m,NUS:T}=_||{},b=A(g,d.group);if((0,t.F)("mobile",{variant:d.group,decision:b?"SHOW":"SKIP",intentLevel:g,PES:m||0,NUS:T||0,reason:b?`Intent ${g} in allowed list`:`Intent ${g} NOT in allowed list`}),(0,i.h)({upsellType:"navigation_mobile",decision:b?"show":"skip",intentLevel:g||"unknown",PES:m||0,NUS:T||0,experimentVariant:d.group}),!b)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let O=L.includes(p),h=N.includes(E),I=r?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",v=y.includes(I),C=r?.("mweb_feature_upsell_copy_visual_combination_v2"),R=C?.anyEnabled??!1;return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_intent_${g}_pes_${m||0}_nus_${T||0}`,allowCloseOnOutsideClick:!0,headingType:S?h?"mweb_feature_upsell_copy_visual_combination_v4":"none":c?O?"mweb_feature_upsell_copy_visual_combination_v5":"none":v?"mweb_feature_upsell_copy_visual_combination_v3":R?"mweb_feature_upsell_copy_visual_combination_v2":"none"}},getNextState:({state:e,decision:a})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType??"none",trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!a?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowOnLandUpsell:v({id:"mobile_on_land_upsell",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:a,hasSeenNavUpsell:l,location:t,userAgent:i,showUnauthMwebSocialDefaultModalUpsell:s,isSocialInAppBrowser:_,shouldTriggerOnLand:r=!1})=>{let d;if(e?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let u=!!t&&!!e&&(0,w.A)(e,t);if(!a||l||!(t&&((0,n.isCloseupPage)(t)||(0,n.isBoardPage)(t)||(0,o.A)(t)||(0,n.isSearchPage)(t)||(0,n.hasInviteCode)(t)||u&&(0,n.isAnyIdeasPage)(t))))return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let p=!(_?.(i)&&e?.("mweb_unauth_social_iab_upsell_boost_experiment",{dangerouslySkipActivation:!0}).anyEnabled)&&s,c=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v5")?.group??"",E="control"===c||L.includes(c),S=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v4")?.group??"",g="control"===S||N.includes(S);if(!s&&!r)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let m=L.includes(c),T=N.includes(S),b=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",O=y.includes(b),h=p?null:e?.("mweb_feature_upsell_copy_visual_combination_v2"),I=h?.anyEnabled??!1;if("social"===(d=p?"social":g?T?"mweb_feature_upsell_copy_visual_combination_v4":"none":E?m?"mweb_feature_upsell_copy_visual_combination_v5":"none":O?"mweb_feature_upsell_copy_visual_combination_v3":I?"mweb_feature_upsell_copy_visual_combination_v2":"none")&&e){let a=e("ce_mweb_visual_plp_upsell");if(a.anyEnabled)switch(a.group){case"enabled_1":d="social_visual_1";break;case"enabled_2":d="social_visual_2";break;case"enabled_3":d="social_visual_3"}}return{shouldShowModal:!0,shouldIncrementCount:!0,showUnauthMwebSocialUpsell:p,modalConfig:{reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"navigation_0",navigationTriggeredUpsell:{newLocation:t,oldLocation:t},headingType:d}}},getNextState:({state:e,decision:a})=>{let{modalConfig:l}=a;return{...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:l?.headingType,trigger:{attributionLabel:l?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:null}}}}}),shouldShowSignupModalOnContextMenuDownloadClick:v({id:"mobile_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:a,modal:l})=>(e||a)&&!l?.isShown,getNextState:({action:e,state:a})=>{let{inMwebDownloadCTAExp:l,showDownloadCloseupIcon:n,attributionLabelSource:o}=e.payload,t={trigger:{attributionLabel:`click_${o}_download_button`,reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},headingType:l||n?"download_limit_reached":"none"};return{...a,mWebSignupModal:{...a.mWebSignupModal,modal:{isShown:!0,displayProps:t,pinId:e.payload.pinId??""}}}}}),shouldShowSignupModalOnFollowButtonClickMobile:v({id:"follow_button_trigger_mobile",evaluate:({mWebSignupModal:e})=>!e?.modal.isShown,getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:e.payload.isContextualFollowEnabled?"follow":"none",trigger:{attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0}}}})}),shouldShowFloatingBanner:{id:"mobile_floating_banner_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},P={desktop:C,mobile:R}},718254(e,a,l){l.d(a,{$B:()=>e_,$D:()=>eG,$n:()=>O,A2:()=>en,A4:()=>T,AD:()=>y,C8:()=>ey,CV:()=>eb,Dx:()=>er,EY:()=>k,Eb:()=>ek,Fe:()=>L,G0:()=>N,Gd:()=>J,HI:()=>ef,IP:()=>F,Ip:()=>f,J3:()=>eg,J4:()=>eL,JP:()=>A,KL:()=>Q,KP:()=>eo,LB:()=>eN,Ll:()=>eF,M:()=>ei,Mh:()=>M,My:()=>z,Oy:()=>em,PH:()=>b,Pm:()=>eR,RD:()=>eH,Rj:()=>eE,SI:()=>q,SJ:()=>Z,Ss:()=>m,St:()=>eK,Tt:()=>eq,Uk:()=>X,V$:()=>eM,Vi:()=>el,Vl:()=>eu,WD:()=>C,WJ:()=>ex,XV:()=>ea,Y0:()=>eI,Yp:()=>es,Z2:()=>eA,Z6:()=>ed,ZF:()=>g,_7:()=>h,_k:()=>eD,_q:()=>K,bw:()=>ew,cG:()=>et,cM:()=>eO,d6:()=>H,dh:()=>R,eM:()=>ev,f8:()=>ec,fQ:()=>W,gk:()=>B,gl:()=>eC,gr:()=>D,h4:()=>I,hq:()=>$,ib:()=>eU,is:()=>eh,j6:()=>V,jw:()=>Y,kx:()=>ep,lI:()=>E,nH:()=>ee,nj:()=>eV,no:()=>j,oW:()=>p,oj:()=>w,op:()=>eT,pV:()=>eS,rD:()=>d,s4:()=>P,sL:()=>S,ts:()=>eP,u5:()=>u,vh:()=>eW,xD:()=>G,xS:()=>x,xU:()=>eB,xl:()=>v,yi:()=>U,zm:()=>c});var n=l(320384),o=l(182835),t=l(512581),i=l(799596),s=l(627203),_=l(693535),r=l(646844);let d="PROCESS_MOBILE_NAVIGATION_CHANGE",u="SET_UPSELL_REASON",p="UPS_EVENT_PIN_VIEW",c="UPS_EVENT_PIN_SAVE",E="UPS_EVENT_DESKTOP_MODAL_SHOW",S="UPS_EVENT_DESKTOP_MODAL_DISMISSED",g="CLICK_CLOSE_UP_CONTEXT_MENU_SAVE_BUTTON",m="CLICK_CLOSE_UP_CONTEXT_MENU_DOWNLOAD_BUTTON",T="TRIGGER_SCROLL_DOWN_UPSELL",b="CLEAR_SCROLL_DOWN_UPSELL",O="DISMISS_BOTTOM_RIGHT_BANNER",h="TRIGGER_SAVE_EDUCATION_POPOVER",I="CLEAR_SAVE_EDUCATION_POPOVER",v="TRIGGER_RELATED_PINS_GRADIENT_UPSELL",w="CLEAR_RELATED_PINS_GRADIENT_UPSELL",y="TRIGGER_MOBILE_RELATED_PINS_GRADIENT_UPSELL",N="TRIGGER_REPLY_TO_SENDER_SHEET",L="CLEAR_REPLY_TO_SENDER_SHEET",A="CLICK_CLOSEUP_UPSELL",C="CLICK_CONTEXT_MENU_SAVE_BUTTON_UPSELL",R="CLICK_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",P="CLICK_FOLLOW_BUTTON_UPSELL",D="CLICK_FOLLOWING_BUTTON_UPSELL",M="CLICK_FOLLOWERS_BUTTON_UPSELL",U="CLICK_COMMENT_COMPOSER_UPSELL",f="CLICK_PIN_LINK_UPSELL",G="CLICK_RELATED_PIN_OPEN_LINK_UPSELL",k="SHOW_MOBILE_SIGNUP_MODAL",x="DISMISS_MOBILE_SIGNUP_MODAL",F="SET_MOBILE_SIGNUP_MODAL_TOP_INTEREST",H="INCREMENT_UPSELL_ELIGIBLE_NAVIGATION_COUNT",W="HIDE_UNAUTH_SHARING_MODALS",B="SHOW_UNAUTH_SHARING_MODALS",K="RESTORE_FROM_LOCAL_STORAGE",q="MAIN_PIN_IMAGE_CLICK_MOBILE",V="ON_LAND_UPSELL_MOBILE",Y="SET_LEARNING_UPSELL_VISIBILITY",X="CLICK_MOBILE_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",j="DISMISS_MOBILE_FLOATING_UPSELL",$="CLICK_FOLLOW_BUTTON_UPSELL_MOBILE",Q="INCREMENT_PIN_SAVE_COUNT",z="DECREMENT_PIN_SAVE_COUNT",Z="INCREMENT_UNAUTH_CLICKTHROUGH_COUNT",J="SET_UNAUTH_DOWNLOAD_COUNT",ee="UPS_EVENT_PIN_SAVE_MOBILE",ea="SET_REFERRED_APP_UPSELL_STATE",el=e=>({type:K,payload:{upsellEligibleNavigationCount:e}}),en=e=>({type:u,payload:{upsellReason:e}}),eo=(e,a,l,n,o)=>({type:p,payload:{pinId:e,seoUrl:a,componentType:l,viewParameter:n,checkExperiment:o}}),et=(e,a)=>({type:c,payload:{pinId:e,attributionLabel:a}}),ei=()=>({type:S}),es=()=>({type:O}),e_=e=>({type:E,payload:{displayProps:e}}),er=()=>({type:A}),ed=(e,a,l)=>({type:C,payload:{pinId:e,attributionLabelSource:a,signupToLoginExpGroup:l}}),eu=(e,a)=>({type:P,payload:{isIdeaPin:e,isContextualFollowEnabled:a}}),ep=(e,a,l,n)=>({type:g,payload:{pinId:e,attributionLabelSource:a,signupToLoginExpGroup:l,checkExperiment:n}}),ec=()=>({type:D}),eE=()=>({type:M}),eS=()=>({type:U}),eg=e=>({type:f,payload:{count:e}}),em=()=>({type:G}),eT=(e,a)=>({checkExperiment:l,currentUserTracker:n})=>o=>{o({type:i.GY,payload:{pageUniqueKey:e,containerPage:a,checkExperiment:l,currentUserTracker:n}})},eb=e=>({type:i.PO,payload:{l1Vertical:e}}),eO=(e,a)=>({type:i._k,payload:{inviter:e,containerPage:a}}),eh=e=>({checkExperiment:a})=>l=>{l({type:i.F_,payload:{containerPage:e,checkExperiment:a}})},eI=e=>({checkExperiment:a})=>l=>{l({type:i.fI,payload:{containerPage:e,checkExperiment:a}})},ev=()=>({type:I}),ew=()=>({checkExperiment:e})=>a=>{a({type:v,payload:{checkExperiment:e}})},ey=()=>({type:w}),eN=()=>({checkExperiment:e,currentUserTracker:a})=>l=>{let{group:n}=e?.("ce_mweb_unauth_social_feature_education")||{};n?.startsWith("enabled_group_board")?l((({checkExperiment:e})=>a=>{a({type:h,payload:{checkExperiment:e}})})({checkExperiment:e,currentUserTracker:a})):n?.startsWith("enabled_reply_to_sender")&&l((({checkExperiment:e})=>a=>{a({type:N,payload:{checkExperiment:e}})})({checkExperiment:e,currentUserTracker:a}))},eL=()=>({type:L}),eA=e=>({type:k,payload:e}),eC=()=>({type:x}),eR=e=>({type:F,payload:{topInterest:e}}),eP=()=>({type:H}),eD=()=>({type:W}),eM=()=>({type:B}),eU=e=>({checkExperiment:a,currentUserTracker:l})=>(n,t)=>{n({type:d,payload:{...e,checkExperiment:a,currentUserTracker:l}});let i=t().upsell;(0,_.A)(i)||(0,o.PM)(`mweb.nav.upsell.show.${e.currentNavigationCount}`)},ef=e=>({checkExperiment:a,currentUserTracker:l})=>(i,_)=>{let d=_().upsell,{country:u}=l,p=l.userAgent.raw,c=s.wz.mobile.shouldShowOnLandUpsell?.evaluate({checkExperiment:a,isUpsellEnabledGlobally:(0,t.mz)({isModalShown:d.mWebSignupModal.modal.isShown??!1,isUnauthSharingModalsShown:d.mWebSignupModal.isUnauthSharingModalsShown??!1,modalHasShown:!!d.mWebSignupModal.modalHasShown,country:u,userAgent:p}),hasSeenNavUpsell:d.mWebSignupModal.modalHasShown,location:e.location,isPaid:e.isPaid,isSocial:e.isSocial,isDirect:e.isDirect,isSEO:e.isSEO,userAgent:p,showUnauthMwebSocialDefaultModalUpsell:e.showUnauthMwebSocialDefaultModalUpsell,isSocialInAppBrowser:n.SS,currentUserTracker:l});c.shouldShowModal&&c.modalConfig&&((0,o.PM)("mweb.nav.upsell.show.0"),c.showUnauthMwebSocialUpsell&&(0,r.GV)("unauth.mweb.social.pin.upsell",{sampleRate:1}),i({type:V,payload:{decision:c,checkExperiment:a}}))},eG=e=>({checkExperiment:a,currentUserTracker:l})=>(n,t)=>{let i=t().upsell,_=!!i.appUpsells.learningUpsell?.isShown,r=s.wz.mobile.shouldShowMainPinImageNavigationalModal?.evaluate({checkExperiment:a,currentUserTracker:l,isUpsellEnabledGlobally:e.upsellContext.isUpsellEnabledGlobally(),isModalCurrentlyShown:e.upsellContext.isModalShown,learningUpsellScenario:e.learningUpsellScenario}),d=s.wz.mobile.shouldShowMainPinImageAppUpsell?.evaluate({learningUpsellScenario:e.learningUpsellScenario,hasConversionUpsell:!!r,isLearningAppUpsellShown:_});r?(0,o.PM)("mweb.nav.upsell.show.main_pin_image_click"):d.shouldToggleAppUpsell?d.currentlyShowing?e.trackInteraction({action:"dismiss",item:"learning-upsell"}):e.trackInteraction({action:"click",item:"learning-upsell"}):e.onImageClick(),n({type:q,payload:{conversionDecision:r,appUpsellDecision:d,checkExperiment:a,pinId:e.pinId}})},ek=({isShown:e,isDismissedByUser:a=!1})=>({type:Y,payload:{isShown:e,isDismissedByUser:a}}),ex=({isDismissedByUser:e=!1}={})=>({type:j,payload:{isDismissedByUser:e}}),eF=(e,a)=>({type:$,payload:{isIdeaPin:e,isContextualFollowEnabled:a}}),eH=()=>({type:z}),eW=()=>({type:Z}),eB=e=>({type:J,payload:{count:e}}),eK=e=>({checkExperiment:a})=>(l,n)=>{let o=n().upsell;s.wz.mobile.shouldAllowUnauthSave?.evaluate({checkExperiment:a,isPPMAndroidUnauthExperience:e.isPPMAndroidUnauthExperience,isFromUnauthContextMenu:e.isFromUnauthContextMenu,currentUnauthSaves:e.unauthSavedPinsStore.pins.length})&&!o.mWebSignupModal.modal.isShown?(e.unauthSavedPinsStore.save({id:e.pinId,nodeId:e.nodeId,imageUrl:e.getPinGifOrImageSrc({imagesUrls:e.imagesUrls,embedSrc:e.embedSrc,embedType:e.embedType,excludeOriginals:!e.isBot&&!e.isSocialBot})}),l({type:Q}),e.handleShowNavFooter(l,e.forceShowNavFooter,e.isNavBarHidden,e.setForceShowNavFooter),e.successCallback&&e.successCallback()):l({type:ee,payload:{attributionLabel:e.isFromUnauthContextMenu?e.attributionLabel||"click_save_button_on_closeup":"click_save_button_with_max_unauth_saves",headingType:e.isFromUnauthContextMenu?"save":"extended_save_out_of_quota",pinId:e.pinId,checkExperiment:a}})},eq=({isShown:e,appUpsellType:a,isBlocking:l})=>({type:ea,payload:{isShown:e,appUpsellType:a,isBlocking:l}}),eV=()=>({checkExperiment:e})=>a=>{a({type:y,payload:{checkExperiment:e}})}},693535(e,a,l){l.d(a,{A:()=>n});let n=e=>{let{modal:a,mWebSignupModal:l,appUpsells:n}=e;return!!(a.isShown||l.modal.isShown||n.learningUpsell?.isShown||n.iabAppUpsell?.isShown)}},240338(e,a,l){l.d(a,{A:()=>o});var n=l(104735);function o(e,a,l=!1){return!!(0,n.isAnyIdeasPage)(a)&&e?.("lop_eoq_lever_nav_mweb",{dangerouslySkipActivation:l}).anyEnabled}},480819(e,a,l){l.d(a,{_1:()=>c,k0:()=>S});var n=l(97407),o=l(296540),t=l(301135),i=l(126439),s=l(697384),_=l(622165),r=l(693117),d=l(646844),u=l(474848);let{Provider:p,getMaybe:c}=(0,s.A)("CloseupNearDupSigsTracker"),E=({group:e,children:a})=>{(0,o.useEffect)(()=>{(0,n.A)("CloseupNearDupSigsTrackerContext","/app/www/closeup/CloseupNearDupSigsTrackerContext.tsx")},[]);let l=(0,r.V2)(),s=(0,o.useRef)([]),_=(0,o.useRef)(new Set),c=(0,o.useRef)([]),E=(0,o.useRef)(new Set),S=(0,o.useRef)(null),g=(0,o.useMemo)(()=>e.includes("enabled_10")?10:e.includes("enabled_20")?20:35,[e]),m=(0,t.YQ)(()=>{e.includes("session_sync")&&(l.setItem(i.kA,s.current),l.setItem(i.Ex,c.current))},500),T=(0,o.useCallback)(()=>{if(!e.includes("session_sync"))return;let a=Date.now(),n=l.getItem(i.kA),o=l.getItem(i.Ex);if(n)try{Array.isArray(n)&&n.every(e=>"string"==typeof e)&&(s.current=n.slice(-5),_.current=new Set(s.current))}catch(e){(0,d.GV)("closeup_page.near_dup.session_storage_sync.closeup.fail",{sampleRate:1})}if(o)try{Array.isArray(o)&&o.every(e=>"string"==typeof e)&&(c.current=o.slice(-g),E.current=new Set(c.current))}catch(e){(0,d.GV)("closeup_page.near_dup.session_storage_sync.impression.fail",{sampleRate:1})}(0,d.N9)("closeup_page.near_dup.session_storage_sync.success",Date.now()-a,{sampleRate:.1,tags:{status:"success"}})},[s,c,l,e,g]),b=(0,o.useCallback)(e=>{if(E.current.has(e)&&(c.current=c.current.filter(a=>a!==e)),c.current.length>=g){let e=c.current.shift();e&&E.current.delete(e)}E.current.add(e),c.current.push(e)},[g]),O=(0,o.useCallback)(e=>{if(_.current.has(e)&&(s.current=s.current.filter(a=>a!==e)),s.current.length>=5){let e=s.current.shift();e&&_.current.delete(e)}_.current.add(e),s.current.push(e),m()},[m]),h=(0,o.useCallback)(e=>{if(S.current===e)return[];let a=Date.now();0===s.current.length&&0===c.current.length&&T();let l=Array.from(new Set([...c.current,...s.current]));return S.current=e,(0,d.N9)("closeup_page.near_dup.get_tracked_sigs.success",Date.now()-a,{sampleRate:.1,tags:{status:"success"}}),l},[T]);(0,o.useEffect)(()=>m,[m]);let I=(0,o.useMemo)(()=>({addImpression:b,addCloseup:O,getTrackedNearDupSigs:h}),[b,O,h]);return(0,u.jsx)(p,{value:I,children:a})},S=({children:e})=>{(0,o.useEffect)(()=>{(0,n.A)("CloseupNearDupSigsTrackerContext","/app/www/closeup/CloseupNearDupSigsTrackerContext.tsx")},[]);let{checkExperiment:a}=(0,_.A)(),{anyEnabled:l,group:t}=a("web_closeup_rabbit_hole_dedup");return!l||!t||t.includes("pwt")?(0,u.jsx)(p,{value:void 0,children:e}):(0,u.jsx)(E,{group:t,children:e})}},407242(e,a,l){l.d(a,{J0:()=>u,Yj:()=>d,aR:()=>p,xI:()=>_});var n=l(622165),o=l(534955),t=l(568677),i=l(646844);let s=({checkExperiment:e})=>{let{group:a}=e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0});return{logStat:(e,l)=>(0,i.GV)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:a,...l}})}},_=()=>{let{isAuthenticated:e}=(0,o._8)(),a=(0,t.qJ)(),{checkExperiment:l}=(0,n.A)();return e&&!a?s({checkExperiment:l}):{logStat:()=>{}}},r=0,d=({checkExperiment:e,isAuthMweb:a})=>{if(!a)return;let{logStat:l}=s({checkExperiment:e});(r+=1)<10&&l(`repin_${r}`)};function u({checkExperiment:e,isDesktop:a,isAuthenticated:l}){if(!l)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1};if(a){let{anyEnabled:a}=e("auth_dweb_graphql_pin_page");return{isGraphQLEnabledForRelatedPins:a,isGraphQLEnabledInGeneral:a,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1}}{let{anyEnabled:a,group:l}=e("auth_mweb_graphql_pin_page");switch(l){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};case"enabled_prefetch_story_pin_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!0};case"enabled_prefetch_closeup_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!0,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};default:return{isGraphQLEnabledInGeneral:a,isGraphQLEnabledForRelatedPins:a,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1}}}}function p(){let{checkExperiment:e}=(0,n.A)(),a=(0,t.qJ)(),{isAuthenticated:l}=(0,o._8)();return u({checkExperiment:e,isDesktop:a,isAuthenticated:l})}},192102(e,a,l){l.d(a,{F:()=>i,K:()=>t});var n=l(104735),o=l(646844);let t=()=>!1,i=e=>{(0,n.isDiscoverArticlePage)(e)&&!t()&&(0,o.GV)("mobile_signup_modal.rules.suppress_for_discover_article",{flushImmediate:!0,sampleRate:1})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/76803-d248b2f86ba63bef.mjs.map