(self.modernJsonp=self.modernJsonp||[]).push([["31060"],{543407(e,t,r){r.d(t,{A:()=>n});var a,o=new Uint8Array(16);function n(){if(!a&&!(a="u">typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"u">typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(o)}},946927(e,t,r){r.d(t,{A:()=>i});let a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var o=[],n=0;n<256;++n)o.push((n+256).toString(16).substr(1));let i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!("string"==typeof r&&a.test(r)))throw TypeError("Stringified UUID is invalid");return r}},418562(e,t,r){r.d(t,{A:()=>n});var a=r(543407),o=r(946927);let n=function(e,t,r){var n=(e=e||{}).random||(e.rng||a.A)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return(0,o.A)(n)}},231309(e,t,r){r.d(t,{A:()=>o});var a=r(371882);function o(){return(0,a.y)()}},371959(e,t,r){r.d(t,{KK:()=>o,Ww:()=>d,ab:()=>s,jx:()=>i,px:()=>l,rh:()=>u,vK:()=>c,z9:()=>n});let a="local",o={ADD_VISITED_PAGE:"ADD_VISITED_PAGE",ADD_COMPLETED_SEARCH:"ADD_COMPLETED_SEARCH",REMOVE_COMPLETED_SEARCH:"REMOVE_COMPLETED_SEARCH",ADD_CLICKTHROUGH_PIN:"ADD_CLICKTHROUGH_PIN",UPDATE_DOWNLOAD_COUNT:"UPDATE_DOWNLOAD_COUNT",UPDATE_SAVED_PINS:"UPDATE_SAVED_PINS",UPDATE_REVISITATION:"UPDATE_REVISITATION"},n=(e,t)=>({type:o.ADD_VISITED_PAGE,payload:{path:e,pageType:t,storageType:a}}),i=e=>({type:o.ADD_COMPLETED_SEARCH,payload:{search:e,storageType:a}}),s=e=>({type:o.REMOVE_COMPLETED_SEARCH,payload:{query:e,storageType:a}}),d=e=>({type:o.ADD_CLICKTHROUGH_PIN,payload:{pin:e,storageType:a}}),l=()=>({type:o.UPDATE_DOWNLOAD_COUNT,payload:{storageType:a}}),c=e=>({type:o.UPDATE_SAVED_PINS,payload:{pins:e,storageType:a}}),u=e=>({type:o.UPDATE_REVISITATION,payload:{revisitation:e,storageType:a}})},694134(e,t,r){r.d(t,{BB:()=>I,HG:()=>g,If:()=>R,L_:()=>y,ML:()=>D,Qe:()=>f,Uz:()=>h,XS:()=>E,ZB:()=>T,dE:()=>_,mt:()=>p,t0:()=>A,xc:()=>m});var a=r(960926),o=r(58882),n=r(702464),i=r(902560),s=r(441472),d=r(693117),l=r(883371),c=r(646844);function u(e){return"local"===e?(0,s.y1)():(0,d.V2)()}let p=(e="local")=>{try{let t=u(e);if(!t.accessAllowed)return o.Ic;return(t.getItem(a.rt)||o.Ic).map(e=>({...e,path:(0,i.A)(e.path)}))}catch(e){return(0,c.GV)("current_user_tracker.storage.get_visited_pages.error"),o.Ic}},_=(e,t,r="local")=>{try{let o=u(r);if(!o.accessAllowed)return;let s=(0,i.A)(e),d=[...p(r)],l=(0,n.Tb)(d,s,t,100);l!==d&&o.setItem(a.rt,l)}catch(e){(0,c.GV)("current_user_tracker.storage.add_visited_page.error")}},A=(e="local")=>{try{let t=u(e);if(!t.accessAllowed)return o.xg;return t.getItem(a.sO)||o.xg}catch(e){return(0,c.GV)("current_user_tracker.storage.get_completed_searches.error"),o.xg}},m=(e,t="local")=>{try{let r=u(t);if(!r.accessAllowed)return;let o=[...A(t)],i=(0,n.X5)(o,e,100);i!==o&&r.setItem(a.sO,i)}catch(e){(0,c.GV)("current_user_tracker.storage.add_completed_search.error")}},y=(e,t="local")=>{try{let r=u(t);if(!r.accessAllowed)return;let o=[...A(t)],i=(0,n.JF)(o,e);r.setItem(a.sO,i)}catch(e){(0,c.GV)("current_user_tracker.storage.remove_completed_search.error")}},g=(e="local")=>{try{let t=u(e);if(!t.accessAllowed)return o.vC;return t.getItem(a.S3)||o.vC}catch(e){return(0,c.GV)("current_user_tracker.storage.get_clickthrough_pins.error"),o.vC}},f=(e,t="local")=>{try{let r=u(t);if(!r.accessAllowed)return;let o=[...g(t)],i=(0,n.Yy)(o,e,100);i!==o&&r.setItem(a.S3,i)}catch(e){(0,c.GV)("current_user_tracker.storage.add_clickthrough_pin.error")}},E=(e="local")=>{try{let t=u(e);if(!t.accessAllowed)return 0;return parseInt(t.getItem(a.kL)||String(0),10)}catch(e){return(0,c.GV)("current_user_tracker.storage.get_download_count.error"),0}},R=(e,t="local")=>{try{let r=u(t);if(!r.accessAllowed)return;r.setItem(a.kL,e.toString())}catch(e){(0,c.GV)("current_user_tracker.storage.set_download_count.error")}},I=(e="local")=>{try{let t=u(e);if(!t.accessAllowed)return o.BP;return t.getItem(a.KW)??o.BP}catch(e){return(0,c.GV)("current_user_tracker.storage.get_saved_pins.error"),o.BP}},h=(e,t="local")=>{try{let r=u(t);if(!r.accessAllowed)return;r.setItem(a.KW,e)}catch(e){(0,c.GV)("current_user_tracker.storage.set_saved_pins.error")}},T=(e="local")=>{try{let t=u(e);if(!t.accessAllowed)return(0,o.Cj)();let{ts:r,sessionTimestamps:n}=t.getItem(a.hc)??{};if("number"==typeof r&&Array.isArray(n)&&n.length>0&&n.every(e=>"number"==typeof e))return{ts:r,sessionTimestamps:n};return(0,o.Cj)()}catch(e){return(0,c.GV)("current_user_tracker.storage.get_revisitation.error"),(0,o.Cj)()}},D=(e,t="local")=>{try{let r=u(t);if(!r.accessAllowed)return;r.setItem(a.hc,(0,l.A)(e))}catch(e){(0,c.GV)("current_user_tracker.storage.set_revisitation.error")}}},906474(e,t,r){function a(e,t){let{sessionTimestamps:r}=e,a=Date.now()-864e5*t;return r.filter(e=>e>=a).length}function o(e,t){let r=[...e,Date.now()];return r.length>t?r.slice(-t):r}r.d(t,{A:()=>a,c:()=>o})},702464(e,t,r){r.d(t,{JF:()=>l,Tb:()=>i,X5:()=>s,Yy:()=>d});var a=r(902560),o=r(883371);let n=(e,t,r)=>{let a=[t,...e];return a.length>r?a.slice(0,r):a},i=(e,t,r,i)=>{let s,d,l,c=(0,a.A)(t);return(s=e.length,d=(0,a.A)(c),l=s?(0,a.A)(e[0].path):"",s&&d===l)?e:n(e,(0,o.A)({path:c,pageType:r}),i)},s=(e,t,r)=>{var a;let i,s;return(a=t.query,s=(i=e.length)?e[0].query:"",i&&a===s)?e:n(e,(0,o.A)(t),r)},d=(e,t,r)=>{var a;let i,s;return(a=t.pinId,s=(i=e.length)?e[0].pinId:"",i&&a===s)?e:n(e,(0,o.A)(t),r)},l=(e,t)=>e.filter(e=>e.query!==t)},902560(e,t,r){r.d(t,{A:()=>o});var a=r(106149);function o(e){let t=(0,a.A)(e);return t?`/pin/${t}/`:e}},387663(e,t,r){r.d(t,{A:()=>n});var a=r(58882),o=r(906474);let n=e=>e&&e.sessionTimestamps&&!(e.sessionTimestamps.length<1)&&e.ts?new Date().getTime()-e.ts>a.H3?{state:{...e,sessionTimestamps:(0,o.c)(e.sessionTimestamps,50)},wasUpdated:!0}:{state:e,wasUpdated:!1}:{state:(0,a.Cj)(),wasUpdated:!0}},107792(e,t,r){r.d(t,{AK:()=>n,Qv:()=>a,Wm:()=>o,ZR:()=>d,c7:()=>i,he:()=>s});let a=36e5,o=864e5,n=6048e5,i=2592e6,s=26784e5,d=31536e6},528074(e,t,r){r.d(t,{A:()=>a});let a=r(679842).A},370590(e,t,r){r.d(t,{B1:()=>f,DX:()=>y,Te:()=>_,Zz:()=>p,bi:()=>m,f3:()=>g,uy:()=>A});var a=r(850607),o=r(960926),n=r(414491),i=r(441472),s=r(597911),d=r(144837),l=r(221077);let c="android-app://com.pinterest.twa",u="homescreen_icon",p=e=>["twa","cct","browser","webview"].includes(e),_=e=>{let t;return!!e&&((n.Jt(a.MD)||"").startsWith(c)||(e.document&&e.document.referrer||"").startsWith(c)||!!((t=e.location?.search)&&p((0,l.A)(t).twa_type)))},A=e=>{if(!e)return null;if(e.Windows)return"windows";if(e&&(e.document&&e.document.referrer||"").startsWith("app-info://platform/microsoft-store"))return"msft-store";if(_(e))return"android-twa";if(e.matchMedia&&(e.matchMedia("(display-mode: standalone)")?.matches||e.matchMedia("(display-mode: minimal-ui)")?.matches)&&e.navigator&&e.navigator.userAgent){let{userAgent:t}=e.navigator;if(t.includes("Chrome"))return"chrome";if(t.includes("Safari"))return"safari"}return"unknown"},m=e=>{let t=A(e);return!!(t&&"unknown"!==t)},y=(e,t)=>{if("unknown"!==t)switch(t){case"twa":return 3354;case"cct":return 3355;case"browser":return 3356;default:return null}switch(e){case"chrome":return 3351;case"safari":return 3352;default:return null}};function g(e,t){if(void 0===e)return"notEligible";if(!m(e)&&e.navigator&&e.navigator.userAgent){if(e.navigator.userAgent.includes("Windows NT 10.0"))return"windows";else if(t&&t())return"chrome"}return"notEligible"}let f=e=>{if(e)if((0,l.A)(e.location?.search).utm_source===u){let{hostname:t}=e.location;i.Ay.setItem(o.WZ,t)}else e.navigator.userAgent&&e.navigator.userAgent.includes("CrOS")&&(e=>{let t;if(!e)return;let r=i.Ay.getItem(o.WZ)||"";if(r!==e.location.hostname&&(t=Number(i.Ay.getItem(o.a1)),!(Date.now()-t<6e4))){let{pathname:t}=e.location,a=(0,d.A)(t,{utm_source:u}),n=(0,s.A)(a,void 0,r);i.Ay.setItem(o.a1,Date.now()),e.location.href=n}})(e)}},760906(e,t,r){r.d(t,{A:()=>a});let a=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";default:return"OTHER"}}},458503(e,t,r){r.d(t,{A:()=>a});function a(e,t,r,o=0){if(-1===t||-1===r||t===r)return e;let n=r+o,i=t+o;if(n<0||n>=e.length||i<0||i>=e.length)return e;let s=[...e],d=s[i],l=i<n?1:-1;for(let t=i;t!==n;t+=l)s[t]=e[t+l];return s[n]=d,s}},233342(e,t,r){r.d(t,{I:()=>a});let a={AC:"ac",AUTOCOMPLETE:"autocomplete",BOARD:"blp",CONTENT_TYPE_FILTER:"content_type_filter",DIRECT_NAVIGATION:"direct_navigation",FILTER:"filter",GUIDED_SEARCH_ENTRY:"guided_search_entry",GUIDED_SEARCH_LANDING:"guided_search_landing",HASHTAG_CLOSEUP:"hashtag_closeup",HASHTAG_PINREP:"hashtag_pinrep",HOMEFEED_BUBBLE:"homefeed_bubble",HUB_PAGE:"hub_page",IDEAS_ROOT:"ideas_root",IMAGE_ONLY_ATTRIBUTION:"image_only_attribution",LANDING_PAGE_STORY:"landing_page_story",NO_RESULTS_SEARCH_STORY:"no_results_search_story",PRODUCT:"product",REMOVE:"remove",RS:"rs",SHOPPING_FILTER:"shopping_filter",SITELINKS_SEARCHBOX:"sitelinks_searchbox",SLP_REC_CURATED:"slp_rec_curated",SLP_REC_TRENDING:"slp_rec_trending",SRS:"srs",STRUCTURED_GUIDE:"structured_guide",TRENDING:"trending",TYPED:"typed",TYPO_AUTO_ORIGINAL:"typo_auto_original",TYPO_SUGGESTION:"typo_suggestion",UNKNOWN:"Unknown",URECS:"urecs",VANILLA_GUIDE:"guide",VIDEO:"video",VOICE_SEARCH:"voice_search"}},534907(e,t,r){r.d(t,{A:()=>n});var a=r(427575),o=r(182835);function n(){let e=navigator.serviceWorker;return e&&e.getRegistration?((0,o.PM)("mweb_service_worker.unregister_attempt"),e.getRegistration().then(e=>{if(e)return e.unregister().then(()=>((0,o.PM)("mweb_service_worker.unregister_success"),navigator.serviceWorker&&window.caches?window.caches.keys().then(e=>{let t=e.find(e=>e.startsWith("workbox-precaching"));return t?window.caches.delete(t):null}).then(()=>(0,o.PM)("mweb_service_worker.clear_app_shell")):Promise.resolve())).catch(e=>{(0,o.fu)("mweb_service_worker.unregister_fail",{error:(0,a.A)(e,"message")})})})):Promise.resolve()}},106149(e,t,r){r.d(t,{A:()=>n});var a=r(326104),o=r(104456);let n=e=>{let t=/^\/pin\/([a-zA-Z0-9-]+)/,r=(0,o.A)(e);if(t.test(r.path)){let e=r.path.match(t);if(e)return(0,a.A)(e[1]).pinId||void 0}}},326104(e,t,r){r.d(t,{A:()=>a});function a(e){if((e||"").includes("--")){let t=e.split("--"),r=t.pop();return{text:t.join("--"),pinId:r}}return{text:"",pinId:e}}},38772(e,t,r){r.d(t,{A:()=>n});var a=r(144837),o=r(221077);let n=(e,t)=>{if(0===t.length)return e;let[r,n]=e.split("?"),i=Object.entries((0,o.A)(n)).filter(([e])=>!t.includes(e)).reduce((e,[t,r])=>({...e,[t]:r}),{});return(0,a.A)(r,i)}},990213(e,t,r){r.d(t,{e:()=>c,y:()=>l});var a=r(296540),o=r(632321),n=r(697384),i=r(622165),s=r(474848);let{Provider:d,get:l}=(0,n.A)("VideoPlayer");function c({children:e}){let{logContextEvent:t,logImpression:r}=(0,o.o)(),{checkExperiment:n}=(0,i.A)(),[l,c]=(0,a.useState)(!1),[u,p]=(0,a.useState)([]),[_,A]=(0,a.useState)([]),[m,y]=(0,a.useState)({}),g=n("web_ads_mrc_video_impression").anyEnabled,f=e=>{y(t=>({...t,[e]:!0}))},E=(0,a.useCallback)(e=>{if(18===e.event_type&&e.event_data?.pinImpressions?.length){let{isNativeVideoAndWatchable:t}=e.event_data.pinImpressions[0],r=JSON.stringify(e.aux_data?.commerce_data||"").includes("story_pin_id");g&&(t||r)&&p(t=>[...t,e].slice(-1e3))}},[g]),R=(0,a.useCallback)(e=>{18===e.eventType&&g&&A(t=>[...t,e].slice(-1e3))},[g]);(0,a.useEffect)(()=>{let e=u.filter(e=>{let{pinIdStr:r}=e.event_data.pinImpressions[0];return!m[r]||!g||(t((e=>{let{time:t}=e.event_data.pinImpressions[0];return{...e,event_data:{...e.event_data,pinImpressions:[{...e.event_data.pinImpressions[0],isMrcBtr:!0,endTime:t,renderDuration:0}]}}})(e)),!1)});e.length!==u.length&&p(e)},[u,g,t,m]),(0,a.useEffect)(()=>{let e=_.filter(e=>{let t=e.eventData?.pinIdStr;if(!t)return!1;if(m[t]&&g){let t=(e=>{if(e.eventData){let{time:t}=e.eventData;return{...e,eventData:{...e.eventData,isMrcBtr:!0,endTime:t??0}}}return null})(e);return t&&r(t),!1}return!0});e.length!==_.length&&A(e)},[_,g,r,m]);let I=(0,a.useMemo)(()=>({captionsEnabled:l,logMrcVideoAdImpressionOnPlay:R,logMrcVideoAdEventOnPlay:E,setCaptionsEnabled:c,setVideoPlayed:f,videosPlayed:m}),[l,E,R,m]);return(0,s.jsx)(d,{value:I,children:e})}},179146(e,t,r){r.d(t,{A:()=>n,B:()=>a});let{Provider:a,get:o}=(0,r(697384).A)("VerticalNav",{width:0,sideBarWidth:0,selectedNav:void 0,isPanelOpen:()=>!1,sideBarOpen:!1,updatePanelState:()=>{},togglePanelState:()=>{},isBoardCreateModalOpen:!1,setIsBoardCreateModalOpen:()=>{},handleSideBarLinkClick:()=>{}}),n=o},275386(e,t,r){r.d(t,{A:()=>o});var a=r(179146);function o(){let{width:e}=(0,a.A)();return e}},883371(e,t,r){r.d(t,{A:()=>a});let a=function(e){return{...e,ts:Date.now()}}},424762(e,t,r){r.d(t,{$:()=>m,A:()=>E});var a=r(435845),o=r(458503),n=r(110924),i=r(929301),s=r(35494),d=r(87220),l=r(415660),c=r(197472);let u=new Set(["PinResource","RepinResource"]),p={ApiResource:e=>e?.url==="/v3/orientation/nux_creator_recommendations/"?"nux-creator-recommendations":e?.url==="/v3/users/me/interests/"?`recommended-interests:${e.data?.blend_type}`:e?.url===`/v3/usecases/${e.data?.use_case_id}/feed/`?"useCaseFeed":e?.url===`/v3/boards/${e.data?.board_id}/automagical/pins/`?`automagical-board-feed:${e.data?.board_id}`:e?.url===`/v3/aggregated_pin_data/${e.data?.aggregated_pin_data}/comments/`?`aggregated-comments:${e.data?.aggregated_pin_data}`:e?.url==="/v3/users/me/boards/archived/"?"archived-boards":"",AggregatedActivityFeedResource:e=>`trieditfeed:${e.aggregated_pin_data_id}`,AggregatedCommentReplyFeedResource:e=>`${c.A.AGGREGATED_COMMENT_REPLIES}:${e.objectId}`,BoardlessPinsResource:e=>`boardless-pins:${e.userId}`,BestPinsFeedAltResource:e=>`idea-page-best-pins:${e.interest}`,BoardContentRecommendationResource:e=>`recommendation-feed:${e.id}`,BoardFeedResource:e=>`boardfeed:${e.board_id}`,BoardSectionsRepinResource:e=>`board-sections:${e.board_id}`,BoardSectionsResource:e=>`board-sections:${e.board_id}`,BoardSectionPinsResource:e=>`board-section-pins:${e.section_id}`,BoardsFeedResource:e=>`profile-boards:${e.username}`,BoardToolsFeedResource:e=>`board-tools:${e.boardId}`,ConversationsResource:()=>"conversations",DidItUserFeedResource:e=>`profile-tried:${e.username}`,InterestResource:e=>`klp-pins:${e.interest}`,MoreIdeasTabsBoardsResource:()=>"homefeed-more-ideas-tabs",NewsHubResource:()=>"notifications",NewsHubDetailsResource:e=>`newshubdetail:${e.news_id}`,NuxInterestsResource:()=>"nuxTopics",PinsFromBrandResource:e=>`brand-pins:${e.pin}`,ReactionsResource:e=>`reactions:${e.pin_id}`,RelatedArticlesResource:e=>`related-articles:${e.article_id}`,RelatedModulesResource:e=>`related-modules:${e.pin_id}`,RelatedPinFeedResource:e=>`related-pins:${e.pin}`,RelatedStreamResource:e=>`related-story-pins:${e.pinId}`,SearchResource:e=>`search:${(0,i.n1)(e)}`,BaseSearchResource:e=>`search:${(0,i.n1)(e)}`,SectionToolsFeedResource:e=>`section-tools:${e.sectionId}`,ShareSuggestionsTypeaheadResource:e=>`share-suggestions:${e.board||e.user}:${e.term}`,StoryFeedResource:e=>`story-feed:${e.feed_type}:${e.request_params}`,StoryPinTaggedProductsResource:()=>"story-pin-tagged-products",TodayArticleFeedResource:e=>`today-article:${e.id}`,TodayTabInterestFeedResource:e=>`today-article-interestfeed:${e.interest_id}`,TodayTabResource:()=>"today-tab",SeoTier1CandidateResource:()=>"tier1-feed",UnifiedCommentsResource:e=>`unified-comments:${e.aggregated_pin_id}`,UserActivityPinsResource:e=>`profile-pins-feed:${e.user_id}`,UserHomefeedResource:e=>e.pin_quiz?"pin-quiz":"homefeed",UserFollowingResource:e=>`user-following:${e.username}`,UserRecentActivityResource:e=>`user-recent-activity:${e.filter_type}`,UserStoryPinsFeedResource:e=>`story-pins-feed:${e.user_id}`,VisualLiveSearchResource:e=>`visual-search:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualLiveSearchProductFeedResource:e=>`visual-search-products:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualSearchFlashlightUnifiedResource:e=>`related-products-unified:${e.pin_id}`,InterestFollowingResource:e=>`topic-following:${e.username}`,UserPinsResource:e=>`profile-pins:${e.username}`,TopicFeedResource:e=>e.best_pins?`best-topic-pins:${e.interest}`:`topic-pins:${e.interest}`},_={AggregatedActivityFeedResource:({options:{aggregated_pin_data_id:e}})=>({type:c.A.TRIED_IT_FEED,id:e}),AggregatedCommentReplyFeedResource:({options:{isUnifiedComment:e,objectId:t}})=>({type:e?c.A.AGGREGATED_COMMENT_REPLIES:c.A.AGGREGATED_COMMENTS,id:t,reversed:!0}),ApiResource:({options:{url:e,data:t}})=>e===`/v3/usecases/${t?.use_case_id}/feed/`?{type:c.A.USE_CASE_TAB,id:t.use_case_id}:e===`/v3/boards/${t?.board_id}/automagical/pins/`?{type:c.A.AUTOMAGICAL_BOARD_FEED,id:t.board_id}:e===`/v3/aggregated_comments/${t.aggregated_comment}/replies/`?{type:t.isUnifiedComment?c.A.AGGREGATED_COMMENT_REPLIES:c.A.AGGREGATED_COMMENTS,id:t.aggregated_comment,reversed:!0}:e===`/v3/aggregated_pin_data/${t?.aggregated_pin_data}/comments/`?{type:c.A.AGGREGATED_COMMENTS,id:t.aggregated_pin_data}:null,BoardFeedResource:({options:{board_id:e}})=>({type:c.A.BOARDFEED,id:e}),BoardlessPinsResource:({options:{userId:e}})=>({type:c.A.BOARDLESS_PINS,id:e}),BoardSectionPinsResource:({options:{section_id:e}})=>({type:c.A.BOARD_SECTION_PINS,id:e}),BoardSectionsResource:({options:{board_id:e}})=>({type:c.A.BOARD_SECTIONS,id:e}),BoardsResource:({options:{username:e,sort:t,filter_types:r}})=>({type:c.A.PROFILE_BOARDS,id:(0,s.A)(e,t,r)}),BaseSearchResource:({options:e,response:t})=>({type:c.A.SEARCH_PINS,id:(0,i.n1)(e),items:t.resource_response.data?.results||[]}),DidItCommentsResource:({options:{objectId:e}})=>({type:c.A.AGGREGATED_COMMENTS,id:e,reversed:!0}),DidItUserFeedResource:({options:{username:e}})=>({type:c.A.TRIED_IT_FEED,id:e}),RelatedArticlesResource:({options:{article_id:e}})=>({type:c.A.TODAY_TAB,id:e}),StoryPinDraftsResource:({options:{userId:e}})=>({type:c.A.STORY_PIN_DATA,id:e}),TodayTabInterestFeedResource:({options:{interest_id:e}})=>({type:c.A.TODAY_ARTICLE_INTEREST_FEED,id:e}),TodayTabResource:()=>({type:c.A.TODAY_TAB,id:"todayTab"}),UnifiedCommentsPreviewResource:({options:{aggregated_pin_id:e}})=>({type:c.A.UNIFIED_COMMENTS,id:e}),UnifiedCommentsResource:({options:{aggregated_pin_id:e,is_reversed:t}})=>({type:c.A.UNIFIED_COMMENTS,id:e,reversed:t}),UserActivityPinsResource:({options:{user_id:e}})=>({type:c.A.PROFILE_PINS_FEED,id:e}),UserStoryPinsFeedResource:({response:e,options:{user_id:t}})=>({type:c.A.STORY_PINS_FEED,id:t,items:e.resource_response.data||[]})},A=(e,{pinId:t,oldFeedId:r,newFeedId:a})=>r===a?e:((e,{pinId:t,feedId:r})=>e[r]?{...e,[r]:[{type:"pin",id:t},...e[r]]}:e)(((e,{pinId:t,feedId:r})=>e[r]?{...e,[r]:e[r].filter(e=>"pin"!==e.type||e.id!==t)}:e)(e,{pinId:t,feedId:r}),{pinId:t,feedId:a}),m=(e,t)=>(0,a.A)(p,e)?p[e](t):null,y=(e,t)=>t?`board-section-pins:${t}`:`boardfeed:${e}`,g=(e,t)=>e.map(e=>{let{id:r,schema:a,type:o}=e;return"home_feed_tabs"===o?e:a?{id:r,type:a,trackingParams:"pin"===a?t.pins[r].tracking_params:void 0,user_id:void 0}:null}).filter(Boolean),f=(e,t,r)=>Object.keys(e).reduce((a,o)=>{let n=e[o]||[],i=n.filter(e=>{if(e.type!==t)return!0;if("reaction"===t){let t=e.id.lastIndexOf(":");return e.id.substring(0,t)!==r}return e.id!==r});return n.length!==i.length&&(a[o]=i),a},{...e}),E=(e={},t)=>{switch(t.type){case n.v6:case n.LB:{let{payload:r}=t,{resource:o,options:i,normalizedResponse:s,schema:u}=r;if(s&&(0,a.A)(p,o)){let r=((e,t,r)=>{let a=r||d.A[e];if(a===l.hm)return t.result;if(a===l.IL)return t.result.map(e=>({id:e,schema:"board"}));if(a===l.Xm)return t.result.map(e=>({id:e,schema:"user"}));if(a===l.D$)return t.result.map(e=>({id:e,schema:"invite"}));if(a===l.d9)return t.result.map(e=>({id:e,schema:"reaction"}));if("object"==typeof a){let e=Object.entries(a).find(([,e])=>e===l.hm);if(e)return t.result[e[0]]}return null})(o,s,u);if(r&&Array.isArray(r)){let a=p[o](i);if(!a)return e;if("BoardToolsFeedResource"===o||"SectionToolsFeedResource"===o)return{...e,[a]:r};if("UnifiedCommentsResource"===o){let o=g(r,s.entities);if(e[a]&&(n.v6||n.LB===t.type))return{...e,[a]:[...e[a],...o]};return{...e,[a]:o}}{let o=[...t.type===n.LB&&e[a]||[],...g(r,s.entities)];return{...e,[a]:o}}}}else{let{data:a}=r.response.resource_response;if(!r.options?.redux_normalize_feed)return e;let o=_[r.resource]({options:r.options,response:r.response});if(o){let{type:r,id:i,items:s,reversed:d}=o,l=(s||a||[]).filter(Boolean).map(e=>((e,t)=>{switch(e.type){case"story":return{id:e.id??"",type:"story",story_type:e.story_type??""};case"module":return{id:e.id,type:"module",name:e.name};case"user":return{id:e.id,type:"user"};case"board":return t===c.A.PROFILE_BOARDS?{id:e.id,type:"board",onProfile:!0,profileGroup:e.archived_by_me_at?"archived":e.privacy||"public"}:{id:e.id,type:"board",onProfile:!1};case"board_section":return{type:"boardsection",id:e.id};case"triedit":return{type:"triedit",id:e.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:e.id};case"home_feed_tab":return{type:"home_feed_tab",id:e.id,name:e.name};case"storypindata":return{id:e.id,type:"storypindata"};case"todayarticle":return{type:"todayarticle",id:e.id};case"unifiedcommentspreview":return"userdiditdata"===e.unified_comment.type?{type:"triedit",id:e.unified_comment.id}:{type:"aggregatedcomment",id:e.unified_comment.id};default:let r="useCaseFeed"===t&&"tracking_params"in e;return{type:"pin",id:e.id??"",...r&&{trackingParams:e.tracking_params}}}})(e,r));d&&(l=l.reverse());let u=`${r}:${i}`,p=e[u];if(p||t.type!==n.LB){let r=p||[],a=l;return t.type===n.LB&&(a=d?l.concat(r):r.concat(l)),{...e,[u]:a}}}}break}case"FEED_ITEM_REORDERED":{let{payload:{feedType:r,feedId:a,itemType:n,targetItemId:i,sourceItemId:s}}=t,d=`${r}:${a}`,l=e[d]||[],u=-1,p=-1;if([c.A.BOARDFEED,c.A.BOARD_SECTION_PINS,c.A.BOARD_SECTIONS,"profileBoards"].includes(r)&&(u=l.findIndex(e=>e.type===n&&e.id===s),p=l.findIndex(e=>e.type===n&&e.id===i)),-1!==u&&-1!==p)return{...e,[d]:(0,o.A)(l,u,p)};break}case"FEED_ITEMS_REMOVED":{let{payload:{feedType:r,feedId:a,inverseSelection:o,itemType:n,itemIds:i=[]}}=t,s=`${r}:${a}`,d=e[s]||[];if(d&&d.length>0&&(r===c.A.BOARD_SECTION_PINS||r===c.A.BOARDFEED)){let t=d.filter(e=>{let t=i.includes(e.id);return!(e.type===n&&(o&&!t||!o&&t))}),r=!!t.find(e=>"pin"===e.type);return{...e,[s]:r?t:[]}}if(d&&d.length>0&&r===c.A.BOARD_SECTIONS||d&&d.length>0&&(r===c.A.AGGREGATED_COMMENTS||r===c.A.BOARDLESS_PINS||r===c.A.PROFILE_PINS_FEED||r===c.A.STORY_PINS_FEED||r===c.A.UNIFIED_COMMENTS||r===c.A.TRIED_IT_FEED||r===c.A.STORY_PIN_DATA)){let t=d.filter(e=>{let t=i.includes(e.id);return!(e.type===n&&t)});return{...e,[s]:t}}break}case"FEED_ITEMS_ADDED":{let{payload:{feedType:r,feedId:a,itemType:o,itemIds:n=[],prepend:i}}=t,s=`${r}:${a}`,d=e[s]||[];if(d&&(r===c.A.BOARD_SECTION_PINS||r===c.A.BOARDFEED||r===c.A.BOARDLESS_PINS)){let t=n.map(e=>({id:e,type:o})),r=0;"story"===(d[0]||{}).type&&(r=1),"story"===(d[1]||{}).type&&(r=2);let a=[...d.slice(0,r),...t,...d.slice(r)];return{...e,[s]:a}}if(d&&r===c.A.BOARD_SECTIONS){let t=[...n].reverse().map(e=>({id:e,type:"boardsection"})),r=d?[...t,...d]:[...t];return{...e,[s]:r}}if(r===c.A.AGGREGATED_COMMENTS||r===c.A.AGGREGATED_COMMENT_REPLIES||r===c.A.PROFILE_PINS_FEED||r===c.A.STORY_PINS_FEED||r===c.A.UNIFIED_COMMENTS){let t=n.map(e=>({id:e,type:o})),r=d?[...i?t:d,...i?d:t]:t;return{...e,[s]:r}}if(r===c.A.TRIED_IT_FEED){let t=n.map(e=>({id:e,type:o})),r=d?[...t,...d]:t;return{...e,[s]:r}}break}case"FEED_INVALIDATE":{let{payload:{feedType:r,feedId:a}}=t,o=`${r}:${a}`;return e[o],{...e,[o]:null}}case"APPEND_FEED_ITEMS":{let{payload:{id:r,items:a,options:o}}=t,n=e[r];if(!n)return{...e,[r]:a};{let t;return t=o.isPrepend?n[0]&&"story"===n[0].type?[].concat(n[0],a,n.slice(1)):a.concat(n):n.concat(a),{...e,[r]:t}}}case"PIN_DELETE":{let{payload:{pinId:r}}=t;return f(e,"pin",r)}case"BOARD_ARCHIVE":{let{payload:{boardId:r,username:a}}=t,o=`profile-boards:${a??""}`;if(e[o])return{...e,[o]:e[o].filter(e=>e.id!==r)};break}case"BOARD_UNARCHIVE":{let{payload:{boardId:r}}=t,a="archived-boards";if(e[a])return{...e,[a]:e[a].filter(e=>e.id!==r)};break}case"BOARD_DELETE":{let{payload:{boardId:r}}=t;return f(e,"board",r)}case"BOARD_SECTION_DELETE":{let{payload:{boardSectionId:r}}=t;return f(e,"boardsection",r)}case"PINS_MOVE":{let{payload:{source:r,target:a,pinIds:o,userId:n}}=t,i=r.boardlessPins&&n&&`boardless-pins:${n}`||r.boardId&&y(r.boardId,r.sectionId),s=y(a.boardId,a.sectionId);return o.reduce((e,t)=>A(e,{pinId:t,oldFeedId:i,newFeedId:s}),e)}case"PINS_MOVE_ALL":{let{payload:{source:r,target:a,excludePinIds:o}}=t,n=y(r.boardId,r.sectionId),i=y(a.boardId,a.sectionId),s={...e,[n]:o.map(e=>({type:"pin",id:e}))};return delete s[i],s}case"PIN_EDIT":{let{payload:{pinId:r,boardId:a,sectionId:o="",source:{boardId:n,sectionId:i}}}=t;return A(e,{pinId:r,oldFeedId:y(n,i),newFeedId:y(a,o)})}case n.lI:if(u.has(t.payload.resource)){let r,a=t.payload.response.resource_response.data,{board:o}=a;if("quick_saves"===o.layout)r=`boardless-pins:${t.payload.options.user_id}`;else{let e=t.payload.options.section;r=e?`board-section-pins:${e}`:`boardfeed:${o.id}`}if(e[r]){let t={...e},o={id:a.id,type:"pin",trackingParams:a?.tracking_params};return t[r]=[o].concat(e[r]),t}}if("BoardSectionResource"===t.payload.resource&&t.payload.normalizedResponse){let r=t.payload.normalizedResponse.result,a=t.payload.normalizedResponse.entities.boardsections?.[r].board;if(!a)return e;let o=`board-sections:${a}`;if(e[o]){let t={...e};return t[o]=[{id:r,type:"boardsection"}].concat(e[o]),t}}if("AggregatedCommentResource"===t.payload.resource&&t.payload.normalizedResponse){let r={id:t.payload.normalizedResponse.result,type:"aggregatedcomment"},a={...e};for(let o of["aggregated-comments","unified-comments"]){let n=`${o}:${t.payload.options.objectId}`;e[n]&&(a={...a,[n]:[r].concat(a[n])})}return a}if("AggregatedCommentReplyResource"===t.payload.resource&&t.payload.normalizedResponse){let r=`${c.A.AGGREGATED_COMMENT_REPLIES}:${t.payload.options.objectId}`;return{...e,[r]:[...e[r]||[],{id:t.payload.normalizedResponse.result,type:"aggregatedComment"}]}}if("ReactionsResource"===t.payload.resource&&t.payload.normalizedResponse){let{reaction_pin_id:r,reaction_type:a}=t.payload.options;if("reaction"===t.payload.options.action_type){let o=`reactions:${t.payload.options.pin_id}`,n={...e},i={id:`${r}:${t.payload.options.user_id}:${a}`,type:"reaction",trackingParams:void 0};return n[o]=[i].concat(e[o]),n}if("unreaction"===t.payload.options.action_type)return f(e,"reaction",`${r}:${t.payload.options.user_id}`)}}return e}},825261(e,t,r){r.d(t,{f:()=>E,R:()=>R});var a=r(97407),o=r(296540),n=r(918312),i=r(278106),s=r(369487),d=r(622165),l=r(534955);function c(e){let t={result:{kind:"Pending",promise:e},read:()=>(function(e){let{result:t}=e;switch(t.kind){case"Pending":throw t.promise;case"Ok":return t.value;case"Err":throw t.error;default:throw Error("Unexpected case")}})(t)};return e.then(e=>{t.result={kind:"Ok",value:e}}).catch(e=>{t.result={kind:"Err",error:e}}),t}function u(e){return{result:{kind:"Ok",value:e},read:()=>e}}var p=r(34412),_=r(576642),A=r(646844),m=r(474848);let y=(0,o.createContext)(null),g=/(^\/)|:|(\/$)/g,f=/\//g,E=({children:e})=>{(0,o.useEffect)(()=>{(0,a.A)("EntrypointContext","/pws/entrypoint-router/EntrypointContext.tsx")},[]);let t=(0,n.useRelayEnvironment)(),{checkExperiment:r}=(0,d.A)(),s=(0,l._8)(),c=(0,o.useRef)({}),u=(0,o.useCallback)(e=>{let{rootComponent:a,loadedValueState:o}=h(I(c.current,e),e,"Both",t,r,s);return"NotYetRendered"===o.performanceLoggingState.kind&&(o.performanceLoggingState={kind:"InitiallyRendered",initialRenderTime:Date.now()}),{rootComponent:a,onEntrypointDataLoaded:t=>{if("InitiallyRendered"===o.performanceLoggingState.kind){let r=Date.now();(0,A.N9)("entrypointRouter.routeTiming."+e.kind.replace(g,"").replace(f,"_"),r-o.performanceLoggingState.initialRenderTime,{sampleRate:.1,tags:t??{}}),o.performanceLoggingState={kind:"Complete"}}},loadedValue:o.loadedValue}},[r,t,s]),_=(0,i.Zp)(),E=(0,o.useCallback)(e=>{h(I(c.current,e),e,"Both",t,r,s),_((0,p.P)(e))},[_,r,t,s]),R=(0,o.useCallback)((e,a)=>{let o=I(c.current,e);"Both"===a&&h(o,e,a,t,r,s)},[r,t,s]),T=(0,o.useMemo)(()=>({loadAndReadDuringRender__INTERNAL:u,preload:R,imperativelyNavigate:E}),[u,E,R]);return(0,m.jsx)(y,{value:T,children:e})};function R(){let e=(0,o.use)(y);if(null==e)throw Error("Missing entrypoint context");return e}function I(e,t){let r=p.A[t.kind];if(null==r)throw Error("Unexpected missing route! Did you define it in routeMap.ts?");let a=r.loader();return e[t.kind]??={rootComponent:c(r.rootComponent()),loadedValueStates:{},loader:(0,s.isPromise)(a)?c(a):u(a)}}function h(e,t,r,a,o,n){var i;let s=JSON.stringify((0,_.A)(t.routeParams)),{loadedValueStates:d,rootComponent:l,loader:p}=e;return{rootComponent:l,loadedValueState:d[s]??=(i=t.kind,setTimeout(()=>{let e=d[s];null!=e&&(0,A.GV)("entrypointRouter.entrypointUse",{sampleRate:.1,tags:{routeName:i,usedInTime:"NotYetRendered"!==e.performanceLoggingState.kind}})},3e4),{loadedValue:function(e,t){let{result:r}=e;switch(r.kind){case"Pending":return c(r.promise.then(t));case"Ok":return u(t(r.value));case"Err":var a;return{result:{kind:"Err",error:a=r.error},read:()=>{throw a}};default:throw Error("Unexpected case")}}(p,e=>e({routeParams:t.routeParams,relayEnvironment:a,checkExperiment:o,requestContext:n})),performanceLoggingState:{kind:"NotYetRendered"}})}}},34412(e,t,r){r.d(t,{P:()=>n,A:()=>o});var a=r(278106);let o={"/collage-creation-tool":{loader:()=>Promise.all([r.e("35565"),r.e("31623")]).then(r.bind(r,713649)).then(e=>e.default),rootComponent:()=>Promise.all([r.e("78180"),r.e("91796"),r.e("22029"),r.e("35565"),r.e("53102"),r.e("96560"),r.e("73490"),r.e("64115"),r.e("37101"),r.e("25893")]).then(r.bind(r,391827)).then(e=>e.default)},"/comparison/results":{loader:()=>r.e("27441").then(r.bind(r,906750)).then(e=>e.default),rootComponent:()=>Promise.all([r.e("78180"),r.e("91796"),r.e("26774"),r.e("70231"),r.e("20223")]).then(r.bind(r,727267)).then(e=>e.default)},"/comparison/select/:id":{loader:()=>r.e("54555").then(r.bind(r,46439)).then(e=>e.default),rootComponent:()=>Promise.all([r.e("78180"),r.e("91796"),r.e("26774"),r.e("70231"),r.e("28097")]).then(r.bind(r,506187)).then(e=>e.default)},"/ideas":{loader:()=>Promise.all([r.e("91796"),r.e("60441")]).then(r.bind(r,372139)).then(e=>e.default),rootComponent:()=>Promise.all([r.e("78180"),r.e("91796"),r.e("650"),r.e("75546"),r.e("223")]).then(r.bind(r,73255)).then(e=>e.default)},"/pin/:id/analytics":{loader:()=>r.e("76719").then(r.bind(r,394790)).then(e=>e.default),rootComponent:()=>Promise.all([r.e("78180"),r.e("91796"),r.e("53590"),r.e("88918"),r.e("85212"),r.e("55860"),r.e("19872"),r.e("52518"),r.e("44860"),r.e("26659"),r.e("69533")]).then(r.bind(r,4390)).then(e=>e.default)},"/today/":{loader:()=>r.e("15960").then(r.bind(r,638028)).then(e=>e.default),rootComponent:()=>Promise.all([r.e("78180"),r.e("91796"),r.e("650"),r.e("20258"),r.e("75546"),r.e("51238")]).then(r.bind(r,240185)).then(e=>e.default)}};function n(e){return(0,a.tW)(e.kind,e.routeParams)}},576642(e,t,r){r.d(t,{A:()=>function e(t){if(!t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(e);let r=Object.keys(t).sort(),a={};for(let o=0;o<r.length;o++)a[r[o]]=e(t[r[o]]);return a}})},16389(e,t,r){r.d(t,{$:()=>i,x:()=>n});var a=r(296540),o=r(278106);let n=(0,a.createContext)(null);function i(){return(0,o.zy)()===(0,a.use)(n)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/31060-57f9a9c626a303f0.mjs.map